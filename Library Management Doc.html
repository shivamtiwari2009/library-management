<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Library Management</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="55dd9029-38ef-4e44-9368-23d0757e8cc1" class="page sans"><header><h1 class="page-title">Library Management</h1><p class="page-description"></p></header><div class="page-body"><nav id="5fbf37f7-0669-4ae3-abd7-6d518e257733" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#8b240779-9f16-46ab-8470-d9f54c7e239f">Core entities</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#37cbeafc-7b5b-4ede-9931-06d458da57d8">Services</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#56ef1319-791e-4dab-90dc-fff12a105ab0">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#87c7f09a-f043-43fa-967c-860dcc1d9fac">User Management Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#545ae94f-b551-4903-a5b3-37319f7c109b">Pre-Defined Roles</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#223d78fd-5b56-4ddb-b2e9-c22cd977a2e5">JWT token Authorization</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#159c6677-8163-4680-a8e7-5ab699aa3034">Table (tenant)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5e923e8a-f2d7-475e-a6af-0c8bdec2bcb5">Table (user)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d507230a-5bcf-4570-9de7-1ae1d9621c93">Table (address)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7f55ec68-f70e-49d8-addd-79955e15726b">Table (role)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f24acd93-a1c6-4644-a957-bc262ef0f9fb">Table (permission)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2c53bdf1-94d1-4be2-9691-d4ac2a033d2b">Table (role_permission)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#19b93f47-055e-4bed-a020-154ddd3e2951">Table (user_role)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8c78bf32-c395-491f-8649-996e1f2b9d99">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a434f002-9c5d-4e5b-aa3c-3b56cfe69ef5">Tenant APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ad12f8a4-7455-40be-9a8b-2622edfab03a">Register Tenant (Permission: TENANT_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#cbc657af-e905-4bcf-9349-d3b4d46c5dfb">Update Tenant (Permission: TENANT_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8531de40-fdf0-4bf4-ac3c-201e6c998ca1">Get Tenant (Permission: TENANT_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a8263cd6-0437-4b41-a672-fcf54451046e">Get Tenants (Permission: TENANT_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#43941fae-eebf-4e2b-84d8-f0727fbc8d56">Delete Tenant (Permission: TENANT_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e76aaeb1-7eee-4c89-980f-1cf0510e2976">User APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#41704334-0296-4a95-a602-bac5dd45de17">Login User (Public URL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a24b47f5-e649-4805-936c-e68149265764">Register User (Permission: USER_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#999ca229-4698-44ad-b799-0b758bd5e5aa">Update User (Permission: USER_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#deea1dca-2617-4b30-97cc-d68ca9554599">Get User (Permission: USER_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#54e01dbf-6022-4b5f-90e4-43776972dd23">Get Users (Permission: USER_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#281df0d3-f1ca-456d-bb2f-580f3a959a56">Delete User (Permission: USER_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#46dad5e8-a218-4d09-8282-388db45a9865">Role APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#cb19acb0-5032-417e-8989-e27d7c2ed49a">Create Role (Permission: ROLE_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#99e8c0b0-3937-47b9-a24a-9cda2261bc95">Update Role (Permission: ROLE_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e7730a87-41e8-436b-a220-eea112397e0e">Get Role (Permission: ROLE_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#345d1c63-c34c-460c-a6c8-ba13baf65702">Get Roles (Permission: ROLE_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#c41a7bfc-662b-4098-a260-885d74fc5c82">Add/Remove Permissions to/from Role (Permission: ROLE_ASSIGN_PERMISSION)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e46ff323-5634-4719-979c-321615643620">Delete Role (Permission: ROLE_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#729bd780-e48f-4629-aace-139340a5ba65">Create Permission (Permission: PERMISSION_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1c5547b1-3d86-4278-bf13-b3d3d2c6a71e">Update Permission (Permission: PERMISSION_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#603ad3a5-197a-4e2c-9c97-0a9a29c9b5a0">Get Permission (Permission: PERMISSION_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ce33b387-e42a-45ef-98de-838f259e01ca">Get Permissions (Permission: PERMISSION_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#35ac57b9-8e9a-4c41-9995-6304f5088bf9">Delete Permission (Permission: PERMISSION_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e43b2210-544d-4a41-8bba-ff8ab7e36068">Create Role Permission (Permission: ROLE_PERMISSION_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f90d9f6f-3c3b-4c5b-8838-db9d99f9f1dd">Get Role Permissions (Permission: ROLE_PERMISSION_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#51cf7b57-aa89-48c1-8c92-6ecf38327660">Delete Role Permission (Permission: ROLE_PERMISSION_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9d14a846-e3ae-4b6a-b1fa-4bd343223340">Book Management Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#52244b09-6ce1-470f-b74b-f88cc3f63879">Table (book)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#96edee9d-6966-4ab3-a85e-6d83d49e8222">Table (book_inventory)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#964d0e16-932d-4a7c-b589-970e8a731ade">Table (genre)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#555e649c-9bb5-4cba-a7cf-7d7bf836a075">Table (group) e.g book series</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d36d5046-7fc3-420b-912e-30c90a90b913">Table (language)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6ac0efab-bc26-4b80-97c5-816b064844f9">Table (author)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#98a1ffea-d96e-48dd-86a9-b7b0623eb259">Table (publisher)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bd3ddcc4-ea5b-4db7-a43f-c39a7344d054">Table (book_location)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#69ab40dd-1654-4864-aa94-c5a1da75da4b">Table (book_sub_location)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a6c91e12-775e-4a0b-a4a1-2723c173b00b">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b3e7f0e3-efec-48c3-b798-88e123c748cf">Book APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1320926d-39e3-466b-91e7-b7ed9d010644">Create Book (Permission: BOOK_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#53786b65-4b09-4299-9d3e-f11dd3803590">Update Book (Permission: BOOK_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#886a7e8c-8308-47bb-a845-633ac4643c96">Get Book (Permission: BOOK_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#4400faa0-31a9-494b-81be-9c8295b03baf">Get Books (Permission: BOOK_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#269a9c2e-caf8-4007-a95f-1cc6b26dd6d1">Delete Book (Permission: BOOK_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f0f0d1e2-2fa6-4dc7-a3ce-680ea917d713">Genre APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#dadbbf7e-3e6c-49c5-880f-627d86b3c40d">Create Genre (Permission: GENRE_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8b9d1eb4-7e5c-4d35-b7c4-52ca30d2737c">Update Genre (Permission: GENRE_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bd053362-c0d8-4fe6-a1de-1084dac2b121">Get Genre (Permission: GENRE_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#338757da-790e-4838-b58b-d1c8138a24e1">Get Genres (Permission: GENRE_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#195ee2c2-b44b-43bf-9637-92593938dfc4">Delete Genre (Permission: GENRE_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0fb3a1fc-2cb3-42a9-bae3-6ca94bb657ae">Group APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#427f6acc-2788-4b8d-81df-6bbb77d79be9">Create Group (Permission: GROUP_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#86618cc4-651f-4c84-bd86-f0a5f4ac30ac">Update Group (Permission: GROUP_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#683e776e-3985-4aa7-b594-87afdc6826b4">Get Group (Permission: GROUP_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a0d19baf-1d4e-4f4a-8ecd-704b30ec567f">Get Groups (Permission: GROUP_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#c50a91d8-754a-4a6d-8d8d-fb7fe16aca46">Delete Group (Permission: GROUP_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5b51259a-682b-4868-8e31-f4aa0ecc4cd7">Author APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2ea0d79e-d672-419a-939d-b18f2c5189d1">Create Author (Permission: AUTHOR_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#19d15f8f-c1ba-4d47-ad3c-268f0d071394">Update Author (Permission: AUTHOR_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bd87c1a0-b2b7-4b7f-a872-bd47b8d8cb15">Get Author (Permission: AUTHOR_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#51602d10-47a0-4a52-8ee4-4c2453f72190">Get Authors (Permission: AUTHOR_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bd3441c3-8f46-404e-a875-e6ebd54851e1">Delete Author (Permission: AUTHOR_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#45dd9ff7-7e43-4a28-8e65-38664d7299bf">Publisher APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ff1a5669-42b5-42fe-95cf-61455d66c28c">Create Publisher (Permission: PUBLISHER_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#bb7a0147-33d5-4574-8a19-29b5c2142212">Update Publisher (Permission: PUBLISHER_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9ca659eb-5cab-491a-9818-f8becb57304a">Get Publisher (Permission: PUBLISHER_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e200005f-c829-489a-8f04-1f61b79ec957">Get Publishers (Permission: PUBLISHER_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#573a691f-ab60-46e2-8782-6229ec273c31">Delete Publisher (Permission: PUBLISHER_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ec1c030b-c423-4667-aac7-49c90ef4eba4">Book Location APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#8d1a46d9-e9aa-4bf6-a3bb-2ad5bd3a8bd8">Create Book Location (Permission: LOCATION_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1d68bf8d-400f-4f38-9282-cb874f54951a">Update Book Location (Permission: LOCATION_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#7f2cc8b3-5aab-4fb9-825c-439d626e7651">Get Book Location (Permission: LOCATION_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b73111b0-bca6-4a27-b023-d24443382869">Get Book Locations (Permission: LOCATION_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2e002cee-b25f-4765-9ceb-733bc6f984f5">Delete Book Location (Permission: LOCATION_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0c07725e-d382-410b-b98f-0d7ee0aaf0e5">Book Sub Location APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ff0759f5-630c-41d0-b6b1-7eccf41fc924">Create Book Sub Location (Permission: SUB_LOCATION_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#78f89270-1034-434d-b52c-cc7944f2ceed">Update Book Sub Location (Permission: SUB_LOCATION_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9cd0f078-f36e-4c6f-a572-d043db8d3fb8">Get Book Sub Location (Permission: SUB_LOCATION_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#cc3368b9-e611-471e-980a-e8bd07131863">Get Book Sub Locations (Permission: SUB_LOCATION_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#748e3ee2-ac64-4f23-9841-60e1e975e217">Delete Book Sub Location (Permission: SUB_LOCATION_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#04202732-4714-4bec-9403-abe161d168b4">Member Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e4482b1e-2062-4581-91c7-377171e23a30">Table (member)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d5653acd-96f4-486a-91b5-f70528b073f0">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#00f1b3d7-2554-479b-a673-39cb78da6e8d">Member APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#47b3d54e-2c0e-485b-81e7-59b57367775c">Create Member (Permission: MEMBER_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#97455c28-69d5-45c8-bdd7-dc4ce044d34a">Update Member (Permission: MEMBER_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1800b356-af62-4a2f-896a-ecc61fd144a2">Get Member (Permission: MEMBER_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2f6f1cb2-34e1-426e-8fdc-e0d4504453a4">Get Members (Permission: MEMBER_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#9c038e36-cf8a-45d1-88af-7760071c1d5b">Activate/Deactivate Member (Permission: MEMBER_ACTIVATE_DEACTIVATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#e3e15cb0-4fbb-49ef-bd5d-f18a09e2b077">Renew Membership (Permission: MEMBER_RENEW_MEMBERSHIP)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a4c6f660-132f-4cbc-9ff7-6960ee66c79c">Member Reservation and Borrowing APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ad4f4fb8-e383-4a90-861c-755b943cd20e">Get Member Book Reservations (Permission: MEMBER_BOOK_RESERVATION)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#67af2e4d-53e1-46c6-84eb-b618cbbd0140">Get Member Book Reservation by reservation ID (Permission: MEMBER_BOOK_RESERVATION)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#4a724a30-479c-4260-81c6-1f263b3b2636">Get Member Book borrowings (Permission: MEMBER_BOOK_BORROWING)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2db20311-e5d7-44b8-bc54-b6ae9e228d9f">Get Member Book borrowing by borrowing ID (Permission: MEMBER_BOOK_BORROWING)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#1eae579d-2668-42fa-a8d8-51508857d68e">Book Lending Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b7df9c42-c561-41ea-b9f4-1d0b999a14f7">Table (book_inventory_cache) (will be populate async using cdc)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e555bcff-01b0-4530-af71-cbee471f0d15">Table (book_reservation)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f674d72c-1677-4e8b-9299-0ba5ae7c9e81">Table (borrow_book_ticket)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3de82e2c-8cfe-4ef8-aee8-cba50a46b102">Table (borrow_book_ticket_item)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9464ba41-0991-44cc-855d-17582178bcf1">Table (task)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a14cb2c6-9227-40d3-bdb7-c9dfec1aa779">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e8374a60-4f50-4dc9-b104-de61bd54f50a">Book Reservation APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#828b07c1-e996-4d78-a8c4-5a5a0d5696a1">Reserve Book (Permission: LENDING_BOOK_RESERVATION)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#510a7167-af3f-41ae-95b3-7c0a2772a739">Cancel Reservation (Permission: LENDING_BOOK_CANCEL_RESERVATION)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#419eed4c-5225-4d34-aee9-f87442471ba1">Book Borrowing APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#84fd38a0-5754-4e28-8a2f-b37fb9e3d5ed">Create Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b5a98b75-c04a-4719-addf-aac7d7a56c3b">Add Books to Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#435b47f0-f7c2-4ecd-972e-00c851841251">Get Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#51c716fd-2509-406c-b1cd-9edf7cc68705">Make payment for Borrow book ticket (Permission: LENDING_BOOK_RETURN)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#d342d3f0-1d71-476d-bf8c-c42149646fa9">Return Book (Permission: LENDING_BOOK_RETURN)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#700271e3-d00d-42fd-8e8c-ff22fa536904">Extend Book Borrowing period (Permission: LENDING_BOOK_BORROW)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#94a414b4-72b7-4a89-a5f8-a5efff2d6fa0">Get Task (Permission: LENDING_TASK)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#c851eeb8-9d8e-40af-a552-6241a3b1d2ca">Background Jobs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d2b4c627-c446-4e80-9f6d-fe23dd12fb41">Search  Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#580314fe-6405-408a-b151-b6e0b4312e14">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d9bcfe7a-6c41-41a0-b2d6-3624202909b3">Billing Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3ac9ee67-e243-4d1d-9823-f1272a271943">Table (invoice)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#84464c19-4389-40ea-9e73-93a8838f3c17">Table (invoice_item)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#593a2b5b-64d0-46d9-b746-d318c15ff37b">Table (payment_methods)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6d0c27fc-55cf-42d1-8f80-38db40e3631b">Table (payment)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0f2aa894-84bf-44a4-ba52-dafd0b13542a">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#013ea452-3078-4139-81f2-e3f1a2bb37ee">Create Invoice (Permission: BILLING_INVOICE_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#23d3a0c1-b893-48db-9585-c59f024b5896">Update Invoice (Permission: BILLING_INVOICE_UPDATE)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#fbab91f0-c0f4-4e2c-9cc0-b941c9d23f3c">Get Invoice (Permission: BILLING_INVOICE_READ)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#408fcbf5-2fa4-4520-8ce6-0879c6ae0053">Get Invoices (Permission: BILLING_INVOICE_READ_ALL)</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#08e54476-0e00-44dc-b5e4-30fe2f9496b5">Delete Invoice (Permission: BILLING_INVOICE_DELETE)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ae2d6104-1250-416b-9039-418658d32e6c">Config Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f3e76c69-a7ab-4a00-867b-b813f97a2725">Table (config)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#be52b869-ea08-432c-ae8b-d0c94eaf9146">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#73e4a94d-b434-401a-9f68-3eb7ba7912e3">Notification Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3ab0f694-59ea-47d0-83b1-36524243e787">Table (subscription)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b468ff73-535a-4069-a05f-40d67caea769">Table (notification_history)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f549ff14-b683-480b-8b8d-af03c20bd0ac">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#0e768191-dbb4-4fc5-8aca-08d28fc26eb1">Workflow Service</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#25e60a5d-d0a0-411b-872d-161d4fd3ccd8">Table (workflow)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#da032362-218f-4cfe-b5da-df421f90c615">Table (permission)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a0695db2-d05d-44ea-b49b-5f602997dbb6">Table (workflow_permission)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#1d4ccc2a-7cc8-465c-9e85-4a0c89745224">Table (workflow_user_permission)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#168fed51-6a8a-4d5b-902a-d417800bf913">Table (action)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#22f77f52-c540-4b9b-ad24-bbadc51fb03f">Table (workflow_trigger)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#637cb975-4d67-48e0-afa5-42f0959f297c">Table (event)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f0563d68-2a5f-4b96-ad5f-9dccce3348e9">Table (workflow_execution_history)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e2eeeaf6-846e-48c1-b71e-431d43a8930b">Table (action_execution_history)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#489c7c17-68d8-4718-863d-935aaf278042"><strong>Action Schema files</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#4b359a44-6c2f-4efc-9897-510b47acb9af">Workflow definition </a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#fe6db02d-3f99-4f27-833a-c64123288f72"><strong>Definition using internal actions directly</strong></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#5109e2e2-efb3-4a3d-a822-3857876d3247"><strong>Definition using api</strong></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#6e28e131-7723-445b-abb0-05786ac39c3f"><strong>Definition with error and custom condition</strong></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#a6511959-8382-4408-9e4b-61eed71ed3fa"><strong>Definition for connecting Multiple workflows</strong></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#554e5674-93ff-45a1-b3fe-27c4359b5240">APIs</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ea4005a8-3f31-4d54-be25-03c4307ab644">Workflow Create (Permission: WORKFLOW_CREATE)</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5c68af60-cc3f-4644-95c7-bd3e4c9032ef">Workflow execute</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#79b20c71-82d5-4ec1-bfed-94923cc84bde">Workflow trigger</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#290eb2d3-b4f3-4818-979c-c8a374598c57">Other APIs</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ab23cddc-52c3-46c5-9a85-57c7f6afb841">Analytics Service</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#269df9fb-c5cc-4752-bf1c-281fd13dca9c">Misc</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#4d91e8d3-40de-424f-9a35-0f5fd8119c47">Upload (Request Pre-Sgined s3 URL)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#37173b69-2860-4f89-8ea8-c752c856ff90">Multi Tenant (isolated)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c521d964-caad-40d0-b4e0-19b7c93ebcd1">Notes</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c92a2ba7-340f-4501-a934-92d6cb4eddb8">Extension</a></div></nav><p id="387a5b12-3dd2-41ee-8133-b403332ffb13" class="">
</p><p id="8c0ee920-05bc-45e9-a306-45a591f59929" class="">
</p><p id="da6a07b2-724b-4b52-9733-4d3575498462" class="">
</p><p id="2e4de6e0-9428-4a9f-a443-dd811b23bfd5" class="">
</p><h1 id="8b240779-9f16-46ab-8470-d9f54c7e239f" class="">Core entities</h1><ol type="1" id="0b065298-827d-44ed-ba76-d46a830f08fc" class="numbered-list" start="1"><li>User</li></ol><ol type="1" id="d83ba113-a1de-43ab-bd86-cfc859e5d951" class="numbered-list" start="2"><li>Employee</li></ol><ol type="1" id="2fff1118-b684-4899-8f1b-2af73b4e2af7" class="numbered-list" start="3"><li>Employee hierarchy</li></ol><ol type="1" id="33ddf0a1-41dd-476f-bb80-9acc958c53bc" class="numbered-list" start="4"><li>Author</li></ol><ol type="1" id="9573300b-6e4c-4eb2-8c54-b7e1f909202e" class="numbered-list" start="5"><li>Publisher</li></ol><ol type="1" id="a5da070e-0519-40d7-bdd8-fdd45b480a8c" class="numbered-list" start="6"><li>Library Location</li></ol><ol type="1" id="9b7b1774-e5a4-46c2-bada-9eb9d47e9187" class="numbered-list" start="7"><li>Library Sub Location</li></ol><ol type="1" id="ce3a7ab3-67a7-4304-9781-fea4ffc148ec" class="numbered-list" start="8"><li>Auditing</li></ol><ol type="1" id="89de4b8f-d167-4568-bcf1-c219294852a1" class="numbered-list" start="9"><li>Tenant</li></ol><ol type="1" id="4f959ad2-1da4-45a1-8615-bef7e19871e6" class="numbered-list" start="10"><li>Book</li></ol><ol type="1" id="6e3640d6-d088-40b0-8d87-cb103768375b" class="numbered-list" start="11"><li>Genre</li></ol><ol type="1" id="5a4ae3be-0d69-454b-b070-7e2c26aaf64c" class="numbered-list" start="12"><li>Book lending</li></ol><ol type="1" id="8c1ee68c-b68c-4b1d-b0a4-78c3c5212377" class="numbered-list" start="13"><li>Return book</li></ol><ol type="1" id="2d2489cb-7a58-4ae9-a50e-eb752784c41e" class="numbered-list" start="14"><li>Fines </li></ol><ol type="1" id="4dd219b1-5fd1-4d5b-aca4-247f4085cf39" class="numbered-list" start="15"><li>Member (people who are going to take books)</li></ol><ol type="1" id="98d992e6-0a42-4863-a2a1-b5b335505793" class="numbered-list" start="16"><li>Workflows</li></ol><ol type="1" id="66e51d70-e4f1-44be-9cbe-b9cad674df8a" class="numbered-list" start="17"><li>Workflow trigger</li></ol><ol type="1" id="a0b9d231-1239-4161-9fa9-4ef43173e3a5" class="numbered-list" start="18"><li>Workflow actions</li></ol><h1 id="37cbeafc-7b5b-4ede-9931-06d458da57d8" class="">Services</h1><ol type="1" id="8f2c4e8c-0ee7-4d9e-9893-935ce5d410db" class="numbered-list" start="1"><li>User Service</li></ol><ol type="1" id="a628efbe-c098-4258-a57f-e7199171ecde" class="numbered-list" start="2"><li>Member Service</li></ol><ol type="1" id="dabde212-1c5b-4e1b-a8ea-4d59554a4ef9" class="numbered-list" start="3"><li>Search Service</li></ol><ol type="1" id="fa3c18e1-c3e2-4e8e-b24f-c4c671f9060a" class="numbered-list" start="4"><li>Book Management Service</li></ol><ol type="1" id="3093125d-0d6e-43f5-875e-f899eca438b2" class="numbered-list" start="5"><li>Book Lending Service</li></ol><ol type="1" id="5ae0e528-7be4-436d-a0e3-219f9ca8c47d" class="numbered-list" start="6"><li>Notification Service</li></ol><ol type="1" id="66ba569c-17c5-4419-9e68-a876ca7affbe" class="numbered-list" start="7"><li>Analytics Service</li></ol><ol type="1" id="083d277e-766c-4e91-9a75-1a932e0aaf6c" class="numbered-list" start="8"><li>Billing Service</li></ol><ol type="1" id="4e4ae51d-8f8d-4146-8c34-fd12fe656d94" class="numbered-list" start="9"><li>Config Service</li></ol><ol type="1" id="daa9703e-ee58-4cc9-91ef-25785ca5a62e" class="numbered-list" start="10"><li>Library Card Service</li></ol><ol type="1" id="922ecd3e-95a9-419e-ba30-d09838ea1cf4" class="numbered-list" start="11"><li>Workflows Service</li></ol><ol type="1" id="ed0d471f-2bb3-40b7-8117-e9a85d03cb6d" class="numbered-list" start="12"><li>Operator Service</li></ol><h1 id="56ef1319-791e-4dab-90dc-fff12a105ab0" class="">APIs</h1><p id="b44ee125-2619-4c50-88f8-0c049fb44fa5" class="">We will have two sets of api</p><ol type="1" id="ecb00e49-fc50-4cf2-8988-3bfaaa97a7d7" class="numbered-list" start="1"><li>Admin - API prefix <code>/api/tenant/{tenant_id}/</code></li></ol><ol type="1" id="95aa6286-58ee-463c-adc7-6a20b1160383" class="numbered-list" start="2"><li>Member - API prefix <code>/api/tenant/{tenant_id}/member/</code></li></ol><p id="0b18a4ce-072f-4dba-bdde-b9b2ed2c0f3b" class="">Most of member APIs will also have admin version too</p><h1 id="87c7f09a-f043-43fa-967c-860dcc1d9fac" class="">User Management Service</h1><h3 id="545ae94f-b551-4903-a5b3-37319f7c109b" class="">Pre-Defined Roles</h3><ol type="1" id="62fb3d0e-b534-46f6-aca3-879bbe9c4b9d" class="numbered-list" start="1"><li>Admin</li></ol><ol type="1" id="fa4336d3-9319-42f3-8544-6c83850c6c4b" class="numbered-list" start="2"><li>Employee</li></ol><ol type="1" id="f1410441-d750-4cc6-a760-922b8a85a0d2" class="numbered-list" start="3"><li>Member</li></ol><p id="04ed2fc0-8ea1-45a6-a625-37c8600df50b" class=""><strong>Note</strong></p><ul id="f49fdb49-5e39-498e-aed4-b4f105fd3544" class="bulleted-list"><li style="list-style-type:disc">One can also create custom roles</li></ul><ul id="91b03caf-7e16-4df5-b1f2-cd629ffcf19c" class="bulleted-list"><li style="list-style-type:disc">A user can have multiple roles.</li></ul><h3 id="223d78fd-5b56-4ddb-b2e9-c22cd977a2e5" class="">JWT token Authorization</h3><p id="7d6366be-ffd6-4bb3-8342-f7a3f1be301d" class=""><strong>Token Claims</strong></p><ol type="1" id="88476fb7-d36d-4496-9738-5a5805cdfcbe" class="numbered-list" start="1"><li>tenant_id: UUID</li></ol><ol type="1" id="48f7c4f9-7ca5-44b5-ba52-bf3e53c671c2" class="numbered-list" start="2"><li>user_id: UUID</li></ol><ol type="1" id="ae74bbdd-41b8-4b41-8c19-4b6260dadbd3" class="numbered-list" start="3"><li>member_id: UUID</li></ol><ol type="1" id="dee51c6f-5d07-4c76-bf76-5949284d0a06" class="numbered-list" start="4"><li>roles: array (name of list of roles)</li></ol><p id="c3660bf0-1e99-4d9d-85a5-f1a2f94e5c64" class="">
</p><h3 id="159c6677-8163-4680-a8e7-5ab699aa3034" class="">Table (tenant)</h3><ol type="1" id="00b53fba-e870-4b48-8b86-9a9d07e2e14c" class="numbered-list" start="1"><li>id:UUID PRIMARY KEY</li></ol><ol type="1" id="079b53fa-8d27-45fd-adcc-7b9e3251c861" class="numbered-list" start="2"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="477732fa-7dff-4552-b347-aa9adb1458a3" class="numbered-list" start="3"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="d9bcc17d-1120-4adb-8288-572a6673fad6" class="numbered-list" start="4"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="eaa98a25-253f-47a0-98b5-452753ca5b74" class="numbered-list" start="5"><li>name:TEXT (UNIQUE)</li></ol><ol type="1" id="3953829d-cab8-4a9a-9e92-8f0e5298db4e" class="numbered-list" start="6"><li>domain: TEXT (e.g nyclib.lm.com)</li></ol><ol type="1" id="c9bdaea1-4339-405a-9539-171cba78b3ae" class="numbered-list" start="7"><li>address: UUID REFERENCES address(id)</li></ol><ol type="1" id="c83afbe0-ba05-4ab3-8992-ba98758c4cd1" class="numbered-list" start="8"><li>currency_code: varchar(5)</li></ol><ol type="1" id="91efbd2b-4007-4ee2-b891-7fc593dd5c66" class="numbered-list" start="9"><li>country_code: varchar(5)</li></ol><h3 id="5e923e8a-f2d7-475e-a6af-0c8bdec2bcb5" class="">Table (user)</h3><ol type="1" id="9565b83a-7f6e-4500-a577-2992cc62d56a" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="c8802e3a-9f12-4789-9b1a-36d4e3cb6bf9" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="94c95a13-6919-4699-9475-70017bc2b822" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="1cca30cd-0a68-4c64-937a-c650ecb08b0f" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="929f3d30-48df-482a-8b85-fb665787ac5b" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="7f6df60a-213e-4ec7-a8a6-eecb51f87d82" class="numbered-list" start="6"><li>first_name: TEXT</li></ol><ol type="1" id="e5c23f78-452b-43fb-955c-a40e7eaac9b4" class="numbered-list" start="7"><li>last_name: TEXT</li></ol><ol type="1" id="290d2b83-661c-4456-882b-3794d2658b7f" class="numbered-list" start="8"><li>full_name: TEXT (auto population, can easily search by full name)</li></ol><ol type="1" id="18a6f61e-b04e-4475-bf9d-18e81079ed50" class="numbered-list" start="9"><li>email: TEXT</li></ol><ol type="1" id="154e96fb-c051-4bdc-99dd-fa4756955030" class="numbered-list" start="10"><li>photo_ids: array (s3 links)</li></ol><ol type="1" id="bfa7d07a-468a-4604-a24d-84cde4aec181" class="numbered-list" start="11"><li>password: TEXT (encrypted)</li></ol><ol type="1" id="6b6e7d76-9db5-4065-baf7-a35a0a37b2a7" class="numbered-list" start="12"><li>phone_number: jsonb (pair or country code and phone number)</li></ol><ol type="1" id="9dab31a0-cb70-44f3-a720-a00ccfa3bc23" class="numbered-list" start="13"><li>address: UUID REFERENCES address(id)</li></ol><h3 id="d507230a-5bcf-4570-9de7-1ae1d9621c93" class="">Table (address)</h3><ol type="1" id="9df74663-2db5-43d7-b90d-fecb6840f3a1" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="786cb851-6d93-4d02-a2bd-3a147bb7ce17" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="cb5be159-c852-48e8-a1a1-5ea27ecfb550" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="55dce1fb-8272-4feb-9d8e-ab99b2ee5492" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="1dfd96cb-66d1-4b81-a56a-2e5a5dcfd6bf" class="numbered-list" start="5"><li>first_name: TEXT</li></ol><ol type="1" id="e8bed9d0-4a74-4df3-abfc-8d49c5116124" class="numbered-list" start="6"><li>last_name: TEXT</li></ol><ol type="1" id="b8a74178-f59a-405e-b997-d292fa050de1" class="numbered-list" start="7"><li>phone_number:  jsonb (pair or country code and phone number)</li></ol><ol type="1" id="aaf7384b-25f0-4aa7-a87e-a923ec23d318" class="numbered-list" start="8"><li>address1: TEXT</li></ol><ol type="1" id="c31623e7-3967-4dcf-b908-26af222b5ada" class="numbered-list" start="9"><li>address2:TEXT</li></ol><ol type="1" id="0623b9f3-ec14-41a8-a8f8-920eb2fcc7f2" class="numbered-list" start="10"><li>city:TEXT</li></ol><ol type="1" id="1d4efcd2-4bee-43eb-9af7-9b92b08960bd" class="numbered-list" start="11"><li>state:TEXT</li></ol><ol type="1" id="dc1ecde7-6a50-4dcf-a62b-f98fc589cf8d" class="numbered-list" start="12"><li>country:TEXT</li></ol><ol type="1" id="a83c12b2-9835-4437-ba92-37a165831f2a" class="numbered-list" start="13"><li>zip_code:TEXT</li></ol><ol type="1" id="f77f4064-acbb-445d-bfeb-cb3edf18604c" class="numbered-list" start="14"><li>type:TEXT (home, office, mailing etc)</li></ol><h3 id="7f55ec68-f70e-49d8-addd-79955e15726b" class="">Table (role)</h3><ol type="1" id="9c7ab6d9-579f-491d-8037-d50974f5d132" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="13b3651a-8572-46d4-9eb4-2f32d51ee2f0" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="d8b33432-95e6-46c4-b8a4-fe2eeb3f1664" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="be4ed1fc-3b5d-42ac-9816-3e5a81081d4f" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="3b499b29-6490-43e6-940f-3f3aa3b8b025" class="numbered-list" start="5"><li>name:TEXT (reserved roles: admin, employee, member)</li></ol><h3 id="f24acd93-a1c6-4644-a957-bc262ef0f9fb" class="">Table (permission)</h3><ol type="1" id="1bf827cb-84b4-40c9-b717-78957da8d4d8" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="7921a959-cae4-4eb7-ac0f-34b0805d9500" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="ee1df507-2536-4cd0-9297-bbbc4223bf68" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="542dba7b-61c7-4502-9f37-8ac82ebecfb1" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="0c288d0c-a19c-44be-938d-16fd6b9635cc" class="numbered-list" start="5"><li>name:TEXT (name for permission)</li></ol><h3 id="2c53bdf1-94d1-4be2-9691-d4ac2a033d2b" class="">Table (role_permission)</h3><ol type="1" id="9318f237-e587-4853-9e20-39d294d0b6fa" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="e26debb5-e0f9-48b4-a3ce-80c53fd27d1a" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="4bfe73a5-68ce-4b64-bbe4-2190e4f0da8f" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="4ebfe43f-fc93-4dc9-ba14-45f1815277bb" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="ea73e21e-bf16-4759-a99c-2cb52e3bbeb4" class="numbered-list" start="5"><li>service_type: TEXT (BILLING, NOTIFICATION etc)</li></ol><ol type="1" id="cf348244-40fd-44c5-bcc9-6477142bcee7" class="numbered-list" start="6"><li>role_id: UUID References role(id)</li></ol><ol type="1" id="6f360ec0-85bf-4d8b-ad11-3f8993d1c34b" class="numbered-list" start="7"><li>permission_id: UUID References permission(id)</li></ol><h3 id="19b93f47-055e-4bed-a020-154ddd3e2951" class="">Table (user_role)</h3><ol type="1" id="0630a5e1-c485-43ce-b7aa-422ab18293fc" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="cea97503-716c-4de3-a6f2-ed894572987f" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="70985273-5c4a-4eda-b334-017e106b638f" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="dd3e44ce-b9bd-41a6-8255-f7e1f23f6195" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="a9aedac5-e1d4-4f6b-ade4-052d1ab35786" class="numbered-list" start="5"><li>user_id: UUID REFERENCES user(id)</li></ol><h2 id="8c78bf32-c395-491f-8649-996e1f2b9d99" class="">APIs</h2><h2 id="a434f002-9c5d-4e5b-aa3c-3b56cfe69ef5" class="">Tenant APIs</h2><h3 id="ad12f8a4-7455-40be-9a8b-2622edfab03a" class="">Register Tenant (Permission: TENANT_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="9267038a-c23f-4fcc-a6ec-433755a9cfda" class="code"><code class="language-JavaScript">POST /api/tenants

Request
{
    &quot;name&quot;: &quot;New York City Library&quot;,
    &quot;domain&quot;: &quot;nyclib.lm.com&quot;,
    &quot;address&quot;: &quot;UUID of the address&quot;,
    &quot;currency_code&quot;: &quot;USD&quot;,
    &quot;country_code&quot;: &quot;US&quot;
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;name&quot;: &quot;New York City Library&quot;,
    &quot;domain&quot;: &quot;nyclib.lm.com&quot;,
    &quot;address&quot;: &quot;UUID of the address&quot;,
    &quot;currency_code&quot;: &quot;USD&quot;,
    &quot;country_code&quot;: &quot;US&quot;
}
</code></pre><h3 id="cbc657af-e905-4bcf-9349-d3b4d46c5dfb" class="">Update Tenant (Permission: TENANT_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="941e2892-ecdf-467a-8e09-76dcdc17a65f" class="code"><code class="language-JavaScript">PUT /api/tenants/{id}

Request
{
    &quot;name&quot;: &quot;Updated New York City Library&quot;,
    &quot;domain&quot;: &quot;updated.nyclib.lm.com&quot;,
    &quot;address&quot;: &quot;Updated UUID of the address&quot;,
    &quot;currency_code&quot;: &quot;EUR&quot;,
    &quot;country_code&quot;: &quot;FR&quot;
}


Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;Updated New York City Library&quot;,
    &quot;domain&quot;: &quot;updated.nyclib.lm.com&quot;,
    &quot;address&quot;: &quot;Updated UUID of the address&quot;,
    &quot;currency_code&quot;: &quot;EUR&quot;,
    &quot;country_code&quot;: &quot;FR&quot;
}
</code></pre><h3 id="8531de40-fdf0-4bf4-ac3c-201e6c998ca1" class="">Get Tenant (Permission: TENANT_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="55240af9-e70b-4d09-a2ad-892d4da64974" class="code"><code class="language-JavaScript">GET /api/tenants/{id}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;deleted_at&quot;: null,
    &quot;name&quot;: &quot;New York City Library&quot;,
    &quot;domain&quot;: &quot;nyclib.lm.com&quot;,
    &quot;address&quot;: &quot;UUID of the address&quot;,
    &quot;currency_code&quot;: &quot;USD&quot;,
    &quot;country_code&quot;: &quot;US&quot;
}
</code></pre><h3 id="a8263cd6-0437-4b41-a672-fcf54451046e" class="">Get Tenants (Permission: TENANT_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="00acf935-9f36-41d2-a0fc-103b0e6efdce" class="code"><code class="language-JavaScript">GET /api/tenants&amp;pageNumber=1&amp;pageSize=10

Response

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;New York City Library&quot;,
      &quot;domain&quot;: &quot;nyclib.lm.com&quot;,
      &quot;address&quot;: &quot;UUID of the address&quot;,
      &quot;currency_code&quot;: &quot;USD&quot;,
      &quot;country_code&quot;: &quot;US&quot;
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;Los Angeles Public Library&quot;,
      &quot;domain&quot;: &quot;lapub.lm.com&quot;,
      &quot;address&quot;: &quot;UUID of the address&quot;,
      &quot;currency_code&quot;: &quot;USD&quot;,
      &quot;country_code&quot;: &quot;US&quot;
    }
  ]
}
</code></pre><h3 id="43941fae-eebf-4e2b-84d8-f0727fbc8d56" class="">Delete Tenant (Permission: TENANT_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="59da4dab-0feb-44bd-8156-53a7b66dd0da" class="code"><code class="language-JavaScript">DELETE /api/tenants/{id}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;deleted_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}
</code></pre><p id="2785872c-576a-4325-9184-d14ab08d321a" class="">
</p><h2 id="e76aaeb1-7eee-4c89-980f-1cf0510e2976" class="">User APIs</h2><h3 id="41704334-0296-4a95-a602-bac5dd45de17" class="">Login User (Public URL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="fc3fe38a-0330-406f-b938-91c946663155" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/users/login

Request
{
    &quot;tenant_id&quot;: &quot;UUID for tenant&quot;
    &quot;email&quot;: &quot;user@example.com&quot;,
    &quot;password&quot;: &quot;password123&quot;
}

Response

{
    &quot;access_token&quot;: &quot;jwt-token-here&quot;,
    &quot;refresh_token&quot;: &quot;refresh token here&quot;
}
</code></pre><h3 id="a24b47f5-e649-4805-936c-e68149265764" class="">Register User (Permission: USER_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8433b6-dc6d-45a5-95c5-81ff2f26e5f3" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/users

Request
{
    &quot;first_name&quot;: &quot;John&quot;,
    &quot;last_name&quot;: &quot;Doe&quot;,
    &quot;email&quot;: &quot;user@example.com&quot;,
    &quot;password&quot;: &quot;password123&quot;,
    &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;1234567890&quot;
    },
    &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
		}
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;first_name&quot;: &quot;John&quot;,
    &quot;last_name&quot;: &quot;Doe&quot;,
    &quot;full_name&quot;: &quot;John Doe&quot;,
    &quot;email&quot;: &quot;user@example.com&quot;,
    &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;1234567890&quot;
    },
    &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
		}
}
</code></pre><h3 id="999ca229-4698-44ad-b799-0b758bd5e5aa" class="">Update User (Permission: USER_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="f4e7881a-3c50-4596-9acb-82fa957498b5" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/users/{id}

Request
{
    &quot;first_name&quot;: &quot;Jane&quot;,
    &quot;last_name&quot;: &quot;Doe&quot;,
    &quot;email&quot;: &quot;jane.doe@example.com&quot;,
    &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;0987654321&quot;
    },
    &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
		}
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;first_name&quot;: &quot;Jane&quot;,
    &quot;last_name&quot;: &quot;Doe&quot;,
    &quot;full_name&quot;: &quot;Jane Doe&quot;,
    &quot;email&quot;: &quot;jane.doe@example.com&quot;,
    &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;0987654321&quot;
    },
    &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
		}
}
</code></pre><h3 id="deea1dca-2617-4b30-97cc-d68ca9554599" class="">Get User (Permission: USER_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="ad4bc526-72e0-4cfa-9d7e-f5730992cb6b" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/users/{id}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;deleted_at&quot;: null,
    &quot;first_name&quot;: &quot;John&quot;,
    &quot;last_name&quot;: &quot;Doe&quot;,
    &quot;full_name&quot;: &quot;John Doe&quot;,
    &quot;email&quot;: &quot;user@example.com&quot;,
    &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;1234567890&quot;
    },
    &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
		}
}
</code></pre><h3 id="54e01dbf-6022-4b5f-90e4-43776972dd23" class="">Get Users (Permission: USER_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="8e85800d-3568-4b03-9b4d-0fd8ea7a08b9" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/users

Response

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;first_name&quot;: &quot;John&quot;,
      &quot;last_name&quot;: &quot;Doe&quot;,
      &quot;full_name&quot;: &quot;John Doe&quot;,
      &quot;email&quot;: &quot;user@example.com&quot;,
      &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;1234567890&quot;
      },
      &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
			}
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;first_name&quot;: &quot;Jane&quot;,
      &quot;last_name&quot;: &quot;Smith&quot;,
      &quot;full_name&quot;: &quot;Jane Smith&quot;,
      &quot;email&quot;: &quot;jane.smith@example.com&quot;,
      &quot;phone_number&quot;: {
        &quot;country_code&quot;: &quot;+1&quot;,
        &quot;number&quot;: &quot;0987654321&quot;
      },
      &quot;address&quot;: {
		    &quot;address1&quot;: &quot;123 Main St&quot;,
		    &quot;address2&quot;: &quot;Apt 4B&quot;,
		    &quot;city&quot;: &quot;New York&quot;,
		    &quot;state&quot;: &quot;NY&quot;,
		    &quot;country&quot;: &quot;USA&quot;,
		    &quot;zip_code&quot;: &quot;10001&quot;,
		    &quot;type&quot;: &quot;home&quot;
			}
    }
  ]
}</code></pre><h3 id="281df0d3-f1ca-456d-bb2f-580f3a959a56" class="">Delete User (Permission: USER_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7da50c64-4a5b-4cb9-9f00-78d0b419177b" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/users/{id}

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;deleted_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}
</code></pre><h2 id="46dad5e8-a218-4d09-8282-388db45a9865" class="">Role APIs</h2><h3 id="cb19acb0-5032-417e-8989-e27d7c2ed49a" class="">Create Role (Permission: ROLE_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="3b0af0cd-642f-4c9f-b7f2-7f3af72e72de" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/roles
Request

{
    &quot;name&quot;: &quot;admin&quot;
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;name&quot;: &quot;admin&quot;
}

</code></pre><h3 id="99e8c0b0-3937-47b9-a24a-9cda2261bc95" class="">Update Role (Permission: ROLE_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="10e459c3-1637-4ded-8396-deb369de0b21" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/roles/{id}

Request

{
    &quot;name&quot;: &quot;employee&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;employee&quot;
}
</code></pre><h3 id="e7730a87-41e8-436b-a220-eea112397e0e" class="">Get Role (Permission: ROLE_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2365497d-113b-4c87-9266-29c16aa45e37" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/roles/{id}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;admin&quot;
}</code></pre><h3 id="345d1c63-c34c-460c-a6c8-ba13baf65702" class="">Get Roles (Permission: ROLE_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2d67ca46-f323-44f1-a899-c8fe58f7f3c4" class="code"><code class="language-JavaScript">
GET /api/tenant/{tenantId}/roles?pageNumber=1&amp;pageSize=10

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;name&quot;: &quot;admin&quot;
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;name&quot;: &quot;employee&quot;
    }
  ]
}</code></pre><h3 id="c41a7bfc-662b-4098-a260-885d74fc5c82" class="">Add/Remove Permissions to/from Role (Permission: ROLE_ASSIGN_PERMISSION)</h3><h3 id="e46ff323-5634-4719-979c-321615643620" class="">Delete Role (Permission: ROLE_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2e2b673b-52dd-4cb7-a1c6-04c65a93258b" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/roles/{id}

Response code 204 No Content</code></pre><h3 id="729bd780-e48f-4629-aace-139340a5ba65" class="">Create Permission (Permission: PERMISSION_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2c58b635-05c0-45fe-9bd3-545c2c78401e" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/permissions

Request

{
    &quot;name&quot;: &quot;READ&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;name&quot;: &quot;READ&quot;
}
</code></pre><h3 id="1c5547b1-3d86-4278-bf13-b3d3d2c6a71e" class="">Update Permission (Permission: PERMISSION_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="31c45ba4-cebc-4fe6-b401-6d38f1681c0e" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/permissions/{id}

Request

{
    &quot;name&quot;: &quot;WRITE&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;tenant_id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;WRITE&quot;
}</code></pre><h3 id="603ad3a5-197a-4e2c-9c97-0a9a29c9b5a0" class="">Get Permission (Permission: PERMISSION_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="e0b496de-e13a-4ef4-9ffa-b0772b6fca9d" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/permissions/{id}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;READ&quot;
}
</code></pre><p id="20ba7bce-da12-4d65-906a-eb2b333e6750" class="">
</p><h3 id="ce33b387-e42a-45ef-98de-838f259e01ca" class="">Get Permissions (Permission: PERMISSION_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="320a853d-2456-4dda-a02a-2cd174e2d5cb" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/permissions

Response

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;name&quot;: &quot;READ&quot;
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;name&quot;: &quot;WRITE&quot;
    }
  ]
}</code></pre><h3 id="35ac57b9-8e9a-4c41-9995-6304f5088bf9" class="">Delete Permission (Permission: PERMISSION_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="a2eb97e5-6d32-4638-998f-797312daf880" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/permissions/{id}

Response 204 No Content</code></pre><h3 id="e43b2210-544d-4a41-8bba-ff8ab7e36068" class="">Create Role Permission (Permission: ROLE_PERMISSION_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="40571522-c5df-4792-b439-0adf8e69a9f8" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/role_permissions

Request
{
    &quot;service_type&quot;: &quot;BILLING&quot;,
    &quot;role_id&quot;: &quot;UUID&quot;,
    &quot;permission_id&quot;: &quot;UUID&quot;
}

Response 
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;service_type&quot;: &quot;BILLING&quot;,
    &quot;role_id&quot;: &quot;UUID&quot;,
    &quot;permission_id&quot;: &quot;UUID&quot;
}

</code></pre><h3 id="f90d9f6f-3c3b-4c5b-8838-db9d99f9f1dd" class="">Get Role Permissions (Permission: ROLE_PERMISSION_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4e305049-6c0c-4997-b271-994e5465bc1a" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/roles/{id}/permissions?pageNum=1&amp;pageSize=10

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;service_type&quot;: &quot;BILLING&quot;,
      &quot;permission&quot;: {
        &quot;id&quot;: &quot;UUID&quot;,
        &quot;name&quot;: &quot;USER_CREATE&quot;
      }
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;service_type&quot;: &quot;NOTIFICATION&quot;,
      &quot;permission&quot;: {
        &quot;id&quot;: &quot;UUID&quot;,
        &quot;name&quot;: &quot;USER_UPDATE&quot;
      }
    }
  ]
}
</code></pre><h3 id="51cf7b57-aa89-48c1-8c92-6ecf38327660" class="">Delete Role Permission (Permission: ROLE_PERMISSION_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="a239d911-97d6-477d-8de4-205ea5d25f61" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/role_permissions/{id}

Response code 204 No Content</code></pre><h1 id="9d14a846-e3ae-4b6a-b1fa-4bd343223340" class="">Book Management Service</h1><h3 id="52244b09-6ce1-470f-b74b-f88cc3f63879" class="">Table (book)</h3><ol type="1" id="40528a14-3da7-48ae-ad50-6c087492d3ee" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="d1f8cded-6610-4103-9cc2-4ca8c7144b59" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="ec70dae6-1e11-435c-9934-892ac64dc18f" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="ce1211f7-9f3b-4946-9b3f-7ae4c1221356" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="c3421e56-6255-457e-a2ff-cb8d7b20f677" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="0e96b8e2-7db9-4588-94b4-11bcdb5cffb7" class="numbered-list" start="6"><li>title:TEXT </li></ol><ol type="1" id="18eb5cab-24eb-4711-ad4b-e6e4ca534159" class="numbered-list" start="7"><li>summary: TEXT — summary of book</li></ol><ol type="1" id="6ee6d1b8-be28-46cd-b1b2-7a2d4ae964be" class="numbered-list" start="8"><li>total_pages: INTEGER</li></ol><ol type="1" id="c429f3f3-73a8-4def-914f-d0b306e6be4a" class="numbered-list" start="9"><li>group_id: UUID REFERENCES group(id)</li></ol><ol type="1" id="0f09eae4-e80b-4bff-ad2d-2b02a9bc9ca6" class="numbered-list" start="10"><li>genre_id: UUID REFERENCES genre(id)</li></ol><ol type="1" id="e5fbb011-c7d5-4a70-9eb6-3402bce0933c" class="numbered-list" start="11"><li>author_id: UUID REFERENCES author(id)</li></ol><ol type="1" id="93753cb1-33a4-4ec9-b012-e7249c9b2bd1" class="numbered-list" start="12"><li>publisher_id: UUID REFERENCES publisher(id)</li></ol><ol type="1" id="e08c33fb-b2e9-41ef-81c0-e97e543f9ad6" class="numbered-list" start="13"><li>ISBN: VARCHAR(25)</li></ol><ol type="1" id="160a181d-8c9f-417d-a15b-9c71c3132177" class="numbered-list" start="14"><li>year: Integer</li></ol><p id="8ceec4ac-62a7-4779-8e0f-166f2a14d416" class="">
</p><h3 id="96edee9d-6966-4ab3-a85e-6d83d49e8222" class="">Table (book_inventory)</h3><ol type="1" id="bc47d7f2-ddb2-4f80-8d6b-5c3b233d474f" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="438c7f59-2805-492f-83c4-e55c9e557da1" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="c73e13ad-93ea-4057-9c53-a3d5d930c3dd" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="b523df91-07d1-4290-b2a8-d1123f44fb46" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="6db64138-089c-44f1-b616-db368d6d56c6" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="a59e3d68-37ad-43e1-8d6c-0d095e59b933" class="numbered-list" start="6"><li>book_id: UUID REFERENCES book(id)</li></ol><ol type="1" id="848714b2-2930-4679-b9bf-bbdc52f8e046" class="numbered-list" start="7"><li>sku: TEXT (internal unique identifier)</li></ol><ol type="1" id="ec75ff74-36f2-4ab9-8d7c-f3d82247458d" class="numbered-list" start="8"><li>reserve_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="88183d7f-379f-4ab0-9423-cdd939f1cd58" class="numbered-list" start="9"><li>cost_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="cc7a10cc-6a85-4be9-bb05-55a1b895aecf" class="numbered-list" start="10"><li>barcode: TEXT</li></ol><ol type="1" id="1261f801-1bf5-40f5-bb31-33d0527e12b0" class="numbered-list" start="11"><li>language_id: UUID REFERENCES language(id)</li></ol><ol type="1" id="7150da83-4f4c-47d4-a94d-4b66502a1d19" class="numbered-list" start="12"><li>ISBN: VARCHAR(25)</li></ol><ol type="1" id="81d4cf2f-ec4c-4017-9485-30a2dcdc2fd1" class="numbered-list" start="13"><li>year: Integer</li></ol><ol type="1" id="0a6dc597-acf3-433d-aea2-c0342b6386c7" class="numbered-list" start="14"><li>photo_ids: array (s3 links)</li></ol><ol type="1" id="9831f6c6-562e-47f4-ae95-347dec48e7c5" class="numbered-list" start="15"><li>book_sub_location_id: UUID REFERENCES book_sub_location(id)<ol type="a" id="264ea1f6-0647-477d-96f3-73b2c17b201a" class="numbered-list" start="1"><li>This will be null if book is in BORROWED status</li></ol></li></ol><p id="2c8061a7-b6dd-4d87-823f-a9e06b92e021" class="">
</p><h3 id="964d0e16-932d-4a7c-b589-970e8a731ade" class="">Table (genre)</h3><ol type="1" id="b90ddc9b-a650-4820-b1cb-f3ce9c0ffa82" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="29495e5a-bcde-4077-bc85-268230c73dfc" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="beaddc5c-52fd-475c-b450-f8ba61fd5796" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="4de43e6f-71e0-495e-ab25-a918f6b4484b" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="f871b6b1-650f-413d-bc6f-9c865bcd0583" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="fa2db7c3-d425-491a-b532-19b3d8461099" class="numbered-list" start="6"><li>name: TEXT</li></ol><h3 id="555e649c-9bb5-4cba-a7cf-7d7bf836a075" class="">Table (group) e.g book series</h3><ol type="1" id="47c433ea-106d-4824-bdaf-e236f63bb0a9" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="e7106510-a03e-43e8-9137-b08fff553331" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="db509989-fc81-4d4b-8a9a-88b33ea6e4d8" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="45ddba30-ec57-4d6c-90c4-e35f4377415e" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="dcbe9a83-51b0-4f75-8d92-9cdb293579ce" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="2284276e-c57b-4b99-a0b2-790faf2fe804" class="numbered-list" start="6"><li>name: TEXT</li></ol><p id="3db9e143-08c4-4686-a659-1630ad4ae7d4" class="">Note: Series of books can be part of one group (e.g Harry Porter, Lord of the rings)</p><h3 id="d36d5046-7fc3-420b-912e-30c90a90b913" class="">Table (language)</h3><ol type="1" id="135a8089-ff28-49d5-a190-647d10d91d51" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="1d3df551-8a67-4959-b6b9-1c151420d95b" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="f3e18645-45b0-49d3-89d6-82bd4e21a3d6" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="18877f97-2f57-4f62-8d45-6d7a3378513d" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="fcc535d6-3b15-4713-b456-b1a5c3e10950" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="ccc3ad63-dd51-4378-87ce-d5ec4fb1109c" class="numbered-list" start="6"><li>name: TEXT</li></ol><ol type="1" id="44c5cb01-b318-4291-884d-925df7b42726" class="numbered-list" start="7"><li>code: varchar(5) e.g en, fr etc</li></ol><p id="f7c3e34f-0d7e-4d14-9829-4079aac0edf3" class="">
</p><h3 id="6ac0efab-bc26-4b80-97c5-816b064844f9" class="">Table (author)</h3><ol type="1" id="13fdf02a-fc97-4357-b9a4-ce578c97a9ac" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY </li></ol><ol type="1" id="7ced375e-5006-48f8-aafa-58269d703358" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="d1148ed6-606f-419f-8d6c-c4f4729e8ed5" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="a5a08cc7-eeec-4839-b514-c788967574ad" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="dc7f6799-20b7-47d4-8951-59fe8404d03f" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="ca05c14b-8899-49b2-8b0e-54783344277b" class="numbered-list" start="6"><li>first_name:TEXT </li></ol><ol type="1" id="74d9904c-9190-4e34-9921-233953146a4a" class="numbered-list" start="7"><li>last_name: TEXT</li></ol><ol type="1" id="5f84625a-b4e1-4daa-9c2c-b0551dbcbcee" class="numbered-list" start="8"><li>full_name: TEXT (auto populated by concatenating first and last name)</li></ol><ol type="1" id="4e07638f-6a5e-47b6-b0b8-9a39a39dc987" class="numbered-list" start="9"><li>dob: DATE </li></ol><h3 id="98a1ffea-d96e-48dd-86a9-b7b0623eb259" class="">Table (publisher)</h3><ol type="1" id="71ea5f83-f5a3-4ca9-b386-7a8911be36a3" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY </li></ol><ol type="1" id="17f35251-629c-4041-a014-62a2774ecf6e" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="757ebbad-85fc-4c1a-8bab-348c540fd383" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="9a989e4e-743d-452e-857d-5a330f3233e7" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="82a6e645-75bf-4427-b4dc-51b38e34eac6" class="numbered-list" start="5"><li>deleted_at:  timestamp with timezone UTC</li></ol><ol type="1" id="d9dd8489-8f5c-4b54-aa4b-8c56071fc505" class="numbered-list" start="6"><li>name:TEXT </li></ol><ol type="1" id="84604dc6-3381-49d6-b492-f5dd15726111" class="numbered-list" start="7"><li>last_name: TEXT</li></ol><ol type="1" id="33edbfd9-1792-4d36-8cd8-03e11228fde1" class="numbered-list" start="8"><li>full_name: TEXT (auto populated by concatenating first and last name)</li></ol><ol type="1" id="4b5930b8-a9fa-4621-9dac-8058df7c4e79" class="numbered-list" start="9"><li>dob: DATE </li></ol><h3 id="bd3ddcc4-ea5b-4db7-a43f-c39a7344d054" class="">Table (book_location)</h3><ol type="1" id="ae28458b-8277-4822-9d1d-74b580efa37f" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="b5f938ee-ff92-4f0d-b3ec-70f6c9db8099" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="fec05fbe-00f4-45fb-8b5c-6a1e2cfc03e0" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="7f805963-4fe3-4ff1-8f84-12492cc218ab" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="ae370c45-bff1-481d-9de3-e16fdd49dc17" class="numbered-list" start="5"><li>name: TEXT</li></ol><ol type="1" id="6ef75461-38f2-4b24-9dee-ba1a5d8928fc" class="numbered-list" start="6"><li>address: jsonb</li></ol><h3 id="69ab40dd-1654-4864-aa94-c5a1da75da4b" class="">Table (book_sub_location)</h3><ol type="1" id="3f296b86-f958-457a-8221-4b124a5c6f83" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="8d0064e5-3101-4b68-baed-a70b1161e60b" class="numbered-list" start="2"><li>tenant_id: UUID REFERENCES tenant(id)</li></ol><ol type="1" id="924e281a-674b-4889-a2ea-216afbdf11ba" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="5adbf501-8840-4756-ae83-63b6508c7bee" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="006c672a-feb0-4994-be11-110fe8f960e6" class="numbered-list" start="5"><li>name: TEXT</li></ol><ol type="1" id="243825b3-3572-4716-838a-7767de404f90" class="numbered-list" start="6"><li>book_location_id: UUID REFERENCES book_location(id)</li></ol><h2 id="a6c91e12-775e-4a0b-a4a1-2723c173b00b" class="">APIs</h2><h2 id="b3e7f0e3-efec-48c3-b798-88e123c748cf" class="">Book APIs</h2><h3 id="1320926d-39e3-466b-91e7-b7ed9d010644" class="">Create Book (Permission: BOOK_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="6fe771ca-ec67-4a98-9c39-639dbac8394f" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/books

Request
{
    &quot;title&quot;: &quot;The Great Gatsby&quot;,
    &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald.&quot;,
    &quot;total_pages&quot;: 218,
    &quot;group_id&quot;: &quot;UUID&quot;,
    &quot;genre_id&quot;: &quot;UUID&quot;,
    &quot;author_id&quot;: &quot;UUID&quot;,
    &quot;publisher_id&quot;: &quot;UUID&quot;,
    &quot;ISBN&quot;: &quot;9780743273565&quot;,
    &quot;year&quot;: 1925
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;title&quot;: &quot;The Great Gatsby&quot;,
    &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald.&quot;,
    &quot;total_pages&quot;: 218,
    &quot;group_id&quot;: &quot;UUID&quot;,
    &quot;genre_id&quot;: &quot;UUID&quot;,
    &quot;author_id&quot;: &quot;UUID&quot;,
    &quot;publisher_id&quot;: &quot;UUID&quot;,
    &quot;ISBN&quot;: &quot;9780743273565&quot;,
    &quot;year&quot;: 1925
}
</code></pre><h3 id="53786b65-4b09-4299-9d3e-f11dd3803590" class="">Update Book (Permission: BOOK_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="e2726778-d63a-4bbc-92b3-ec024f6d9fc4" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/books/{id}

Request

{
    &quot;title&quot;: &quot;The Great Gatsby (Updated)&quot;,
    &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald. (Updated)&quot;,
    &quot;total_pages&quot;: 220,
    &quot;group_id&quot;: &quot;New UUID&quot;,
    &quot;genre_id&quot;: &quot;New UUID&quot;,
    &quot;author_id&quot;: &quot;New UUID&quot;,
    &quot;publisher_id&quot;: &quot;New UUID&quot;,
    &quot;ISBN&quot;: &quot;9780743273566&quot;,
    &quot;year&quot;: 1926
}


Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;title&quot;: &quot;The Great Gatsby (Updated)&quot;,
    &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald. (Updated)&quot;,
    &quot;total_pages&quot;: 220,
    &quot;group_id&quot;: &quot;New UUID&quot;,
    &quot;genre_id&quot;: &quot;New UUID&quot;,
    &quot;author_id&quot;: &quot;New UUID&quot;,
    &quot;publisher_id&quot;: &quot;New UUID&quot;,
    &quot;ISBN&quot;: &quot;9780743273566&quot;,
    &quot;year&quot;: 1926
}
</code></pre><h3 id="886a7e8c-8308-47bb-a845-633ac4643c96" class="">Get Book (Permission: BOOK_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="23ff6104-187e-4985-af56-ef19a732f66b" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/books/{id}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;deleted_at&quot;: null,
    &quot;title&quot;: &quot;The Great Gatsby&quot;,
    &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald.&quot;,
    &quot;total_pages&quot;: 218,
    &quot;group_id&quot;: &quot;UUID&quot;,
    &quot;genre_id&quot;: &quot;UUID&quot;,
    &quot;author_id&quot;: &quot;UUID&quot;,
    &quot;publisher_id&quot;: &quot;UUID&quot;,
    &quot;ISBN&quot;: &quot;9780743273565&quot;,
    &quot;year&quot;: 1925
}
</code></pre><h3 id="4400faa0-31a9-494b-81be-9c8295b03baf" class="">Get Books (Permission: BOOK_READ_ALL)</h3><ol type="1" id="50ee351e-f427-4019-ae93-b2a7c0b44e3f" class="numbered-list" start="1"><li>Various filters (e.g filter by status etc)</li></ol><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="b2014171-788c-47ee-93c7-5451f23a7af1" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/books?pageNumber=1&amp;pageSize=10&amp;status=&quot;AVAILABLE&quot;&amp;genre_id=&quot;UUID&quot;
Available filters
1. status
2. genre_id
3. author_id
4. publisher_id
5. title
6. isbn
7. year

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;title&quot;: &quot;The Great Gatsby&quot;,
      &quot;summary&quot;: &quot;A novel written by American author F. Scott Fitzgerald.&quot;,
      &quot;total_pages&quot;: 218,
      &quot;group_id&quot;: &quot;UUID&quot;,
      &quot;genre_id&quot;: &quot;UUID&quot;,
      &quot;author_id&quot;: &quot;UUID&quot;,
      &quot;publisher_id&quot;: &quot;UUID&quot;,
      &quot;ISBN&quot;: &quot;9780743273565&quot;,
      &quot;year&quot;: 1925
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;title&quot;: &quot;To Kill a Mockingbird&quot;,
      &quot;summary&quot;: &quot;A novel by Harper Lee published in 1960.&quot;,
      &quot;total_pages&quot;: 281,
      &quot;group_id&quot;: &quot;UUID&quot;,
      &quot;genre_id&quot;: &quot;UUID&quot;,
      &quot;author_id&quot;: &quot;UUID&quot;,
      &quot;publisher_id&quot;: &quot;UUID&quot;,
      &quot;ISBN&quot;: &quot;9780060935467&quot;,
      &quot;year&quot;: 1960
    }
  ]
}</code></pre><h3 id="269a9c2e-caf8-4007-a95f-1cc6b26dd6d1" class="">Delete Book (Permission: BOOK_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="407d4995-3ebc-4710-8e40-70ebca653085" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/books/{id}

Response 

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;deleted_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}
</code></pre><p id="062c4e3e-f198-4748-a568-ae820e12dbee" class="">
</p><h2 id="f0f0d1e2-2fa6-4dc7-a3ce-680ea917d713" class="">Genre APIs</h2><h3 id="dadbbf7e-3e6c-49c5-880f-627d86b3c40d" class="">Create Genre (Permission: GENRE_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="08c5b464-53af-4bf1-b83d-ca6e7362a692" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/genres

Request

{
    &quot;name&quot;: &quot;Fiction&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;name&quot;: &quot;Fiction&quot;
}
</code></pre><h3 id="8b9d1eb4-7e5c-4d35-b7c4-52ca30d2737c" class="">Update Genre (Permission: GENRE_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4f816c09-c991-4b56-81ba-238cb19aebb0" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/genres/{id}

Request
{
    &quot;name&quot;: &quot;Historical Fiction&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;Historical Fiction&quot;
}
</code></pre><h3 id="bd053362-c0d8-4fe6-a1de-1084dac2b121" class="">Get Genre (Permission: GENRE_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="6bb7d562-715e-48fb-a3c7-f9cb647ff394" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/genres/{id}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;deleted_at&quot;: null,
    &quot;name&quot;: &quot;Fiction&quot;
}
</code></pre><h3 id="338757da-790e-4838-b58b-d1c8138a24e1" class="">Get Genres (Permission: GENRE_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="bd8aa235-faa8-421b-89c6-694938af8eda" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/genres&amp;name=&#x27;Fiction&#x27;
Available filters
1. name

Response

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;Fiction&quot;
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;Non-Fiction&quot;
    }
  ]
}</code></pre><h3 id="195ee2c2-b44b-43bf-9637-92593938dfc4" class="">Delete Genre (Permission: GENRE_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4f5fda8f-2647-4e78-ab44-5e48c98b9a5b" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/genres/{id}

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;deleted_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}
</code></pre><p id="a281d44f-05cf-4d4c-9dff-c48a3bb3a85a" class="">
</p><h2 id="0fb3a1fc-2cb3-42a9-bae3-6ca94bb657ae" class="">Group APIs</h2><h3 id="427f6acc-2788-4b8d-81df-6bbb77d79be9" class="">Create Group (Permission: GROUP_CREATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="52d93984-0ede-44ae-9b70-919353172220" class="code"><code class="language-JavaScript">POST /api/tenant/{tenantId}/groups

Request
{
    &quot;name&quot;: &quot;Harry Potter Series&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;name&quot;: &quot;Harry Potter Series&quot;
}

</code></pre><h3 id="86618cc4-651f-4c84-bd86-f0a5f4ac30ac" class="">Update Group (Permission: GROUP_UPDATE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="f34b75e8-3eb8-4922-943e-6c01a733259e" class="code"><code class="language-JavaScript">PUT /api/tenant/{tenantId}/groups/{id}

Request
{
    &quot;name&quot;: &quot;Harry Potter Series (Updated)&quot;
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;name&quot;: &quot;Harry Potter Series (Updated)&quot;
}
</code></pre><h3 id="683e776e-3985-4aa7-b594-87afdc6826b4" class="">Get Group (Permission: GROUP_READ)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7c47f144-e45f-4348-9c34-a1782307b50a" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/groups/{id}

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
    &quot;deleted_at&quot;: null,
    &quot;name&quot;: &quot;Harry Potter Series&quot;
}
</code></pre><h3 id="a0d19baf-1d4e-4f4a-8ecd-704b30ec567f" class="">Get Groups (Permission: GROUP_READ_ALL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7f0a8ecf-d7c3-47c5-84b1-b6b521eb9664" class="code"><code class="language-JavaScript">GET /api/tenant/{tenantId}/groups?pageNumber=1&amp;pageSize=10&amp;name=&quot;Harry&quot;

Response

{
  &quot;pageNumber&quot;: 1,
  &quot;pageSize&quot;: 10,
  &quot;totalPages&quot;: 20,
  &quot;hasNext&quot;: true,
  &quot;hasPrev&quot;: false,
  &quot;results&quot;: [
    {
      &quot;id&quot;: &quot;UUID1&quot;,
      &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-01T13:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;Harry Potter Series&quot;
    },
    {
      &quot;id&quot;: &quot;UUID2&quot;,
      &quot;created_at&quot;: &quot;2024-08-02T14:34:56Z&quot;,
      &quot;updated_at&quot;: &quot;2024-08-02T15:45:00Z&quot;,
      &quot;deleted_at&quot;: null,
      &quot;name&quot;: &quot;Lord of the Rings Series&quot;
    }
  ]
}</code></pre><h3 id="c50a91d8-754a-4a6d-8d8d-fb7fe16aca46" class="">Delete Group (Permission: GROUP_DELETE)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2b002147-fead-49f6-827d-c409ce724ce9" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenantId}/groups/{id}

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;deleted_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}
</code></pre><p id="45948203-a084-4b10-a5a5-d5ce38c63a58" class="">
</p><h2 id="5b51259a-682b-4868-8e31-f4aa0ecc4cd7" class="">Author APIs</h2><h3 id="2ea0d79e-d672-419a-939d-b18f2c5189d1" class="">Create Author (Permission: AUTHOR_CREATE)</h3><h3 id="19d15f8f-c1ba-4d47-ad3c-268f0d071394" class="">Update Author (Permission: AUTHOR_UPDATE)</h3><h3 id="bd87c1a0-b2b7-4b7f-a872-bd47b8d8cb15" class="">Get Author (Permission: AUTHOR_READ)</h3><h3 id="51602d10-47a0-4a52-8ee4-4c2453f72190" class="">Get Authors (Permission: AUTHOR_READ_ALL)</h3><h3 id="bd3441c3-8f46-404e-a875-e6ebd54851e1" class="">Delete Author (Permission: AUTHOR_DELETE)</h3><h2 id="45dd9ff7-7e43-4a28-8e65-38664d7299bf" class="">Publisher APIs</h2><h3 id="ff1a5669-42b5-42fe-95cf-61455d66c28c" class="">Create Publisher (Permission: PUBLISHER_CREATE)</h3><h3 id="bb7a0147-33d5-4574-8a19-29b5c2142212" class="">Update Publisher (Permission: PUBLISHER_UPDATE)</h3><h3 id="9ca659eb-5cab-491a-9818-f8becb57304a" class="">Get Publisher (Permission: PUBLISHER_READ)</h3><h3 id="e200005f-c829-489a-8f04-1f61b79ec957" class="">Get Publishers (Permission: PUBLISHER_READ_ALL)</h3><h3 id="573a691f-ab60-46e2-8782-6229ec273c31" class="">Delete Publisher (Permission: PUBLISHER_DELETE)</h3><p id="78e31429-d88b-4c33-ba3a-f3025b1df0c2" class="">
</p><h2 id="ec1c030b-c423-4667-aac7-49c90ef4eba4" class="">Book Location APIs</h2><h3 id="8d1a46d9-e9aa-4bf6-a3bb-2ad5bd3a8bd8" class="">Create Book Location (Permission: LOCATION_CREATE)</h3><h3 id="1d68bf8d-400f-4f38-9282-cb874f54951a" class="">Update Book Location (Permission: LOCATION_UPDATE)</h3><h3 id="7f2cc8b3-5aab-4fb9-825c-439d626e7651" class="">Get Book Location (Permission: LOCATION_READ)</h3><h3 id="b73111b0-bca6-4a27-b023-d24443382869" class="">Get Book Locations (Permission: LOCATION_READ_ALL)</h3><h3 id="2e002cee-b25f-4765-9ceb-733bc6f984f5" class="">Delete Book Location (Permission: LOCATION_DELETE)</h3><h2 id="0c07725e-d382-410b-b98f-0d7ee0aaf0e5" class="">Book Sub Location APIs</h2><h3 id="ff0759f5-630c-41d0-b6b1-7eccf41fc924" class="">Create Book Sub Location (Permission: SUB_LOCATION_CREATE)</h3><h3 id="78f89270-1034-434d-b52c-cc7944f2ceed" class="">Update Book Sub Location (Permission: SUB_LOCATION_UPDATE)</h3><h3 id="9cd0f078-f36e-4c6f-a572-d043db8d3fb8" class="">Get Book Sub Location (Permission: SUB_LOCATION_READ)</h3><h3 id="cc3368b9-e611-471e-980a-e8bd07131863" class="">Get Book Sub Locations (Permission: SUB_LOCATION_READ_ALL)</h3><h3 id="748e3ee2-ac64-4f23-9841-60e1e975e217" class="">Delete Book Sub Location (Permission: SUB_LOCATION_DELETE)</h3><p id="4bfec676-b639-4144-b839-4f13b8b8f3a6" class="">
</p><h1 id="04202732-4714-4bec-9403-abe161d168b4" class="">Member Service</h1><ol type="1" id="d0572fb2-15e9-4499-9425-fefc9b0ad05a" class="numbered-list" start="1"><li>Register member</li></ol><h3 id="e4482b1e-2062-4581-91c7-377171e23a30" class="">Table (member)</h3><ol type="1" id="25e5b252-6907-43ee-9373-5ae2d9d9d357" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="4ef0ae26-e8a8-499a-b06e-6c173f366f7e" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="e8ed21cf-a176-4c24-a7e0-4b59107a0a92" class="numbered-list" start="3"><li>user_id: UUID</li></ol><ol type="1" id="2962c04e-9b9b-4ae0-9807-d26e0884acfc" class="numbered-list" start="4"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="ec69bb81-ae9a-46bf-9f0a-ef1d5daf2449" class="numbered-list" start="5"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="da83dc18-8b66-42b0-b435-8cc101615025" class="numbered-list" start="6"><li>is_active: boolean</li></ol><ol type="1" id="92d30408-6b0c-4113-b298-fb96f872dec8" class="numbered-list" start="7"><li>membership_start_time: timestamp with timezone UTC</li></ol><ol type="1" id="11c25221-f3f7-4c5c-9c04-dcc9696ca828" class="numbered-list" start="8"><li>membership_end_time: timestamp with timezone UTC</li></ol><h2 id="d5653acd-96f4-486a-91b5-f70528b073f0" class="">APIs</h2><h2 id="00f1b3d7-2554-479b-a673-39cb78da6e8d" class="">Member APIs</h2><h3 id="47b3d54e-2c0e-485b-81e7-59b57367775c" class="">Create Member (Permission: MEMBER_CREATE)</h3><h3 id="97455c28-69d5-45c8-bdd7-dc4ce044d34a" class="">Update Member (Permission: MEMBER_UPDATE)</h3><h3 id="1800b356-af62-4a2f-896a-ecc61fd144a2" class="">Get Member (Permission: MEMBER_READ)</h3><h3 id="2f6f1cb2-34e1-426e-8fdc-e0d4504453a4" class="">Get Members (Permission: MEMBER_READ_ALL)</h3><h3 id="9c038e36-cf8a-45d1-88af-7760071c1d5b" class="">Activate/Deactivate Member (Permission: MEMBER_ACTIVATE_DEACTIVATE)</h3><h3 id="e3e15cb0-4fbb-49ef-bd5d-f18a09e2b077" class="">Renew Membership (Permission: MEMBER_RENEW_MEMBERSHIP)</h3><h2 id="a4c6f660-132f-4cbc-9ff7-6960ee66c79c" class="">Member Reservation and Borrowing APIs</h2><h3 id="ad4f4fb8-e383-4a90-861c-755b943cd20e" class="">Get Member Book Reservations (Permission: MEMBER_BOOK_RESERVATION)</h3><h3 id="67af2e4d-53e1-46c6-84eb-b618cbbd0140" class="">Get Member Book Reservation by reservation ID (Permission: MEMBER_BOOK_RESERVATION)</h3><h3 id="4a724a30-479c-4260-81c6-1f263b3b2636" class="">Get Member Book borrowings (Permission: MEMBER_BOOK_BORROWING)</h3><h3 id="2db20311-e5d7-44b8-bc54-b6ae9e228d9f" class="">Get Member Book borrowing by borrowing ID (Permission: MEMBER_BOOK_BORROWING)</h3><h1 id="1eae579d-2668-42fa-a8d8-51508857d68e" class="">Book Lending Service</h1><ol type="1" id="0054ff53-070b-45ee-a337-03b737134e12" class="numbered-list" start="1"><li>Book inventory Cache</li></ol><ol type="1" id="ae07fa2b-5892-4008-afaa-e27d423e7152" class="numbered-list" start="2"><li>Book Reservation</li></ol><ol type="1" id="c216cf38-bbbe-43b4-bfeb-cf4f6d4da9f7" class="numbered-list" start="3"><li>Book Return</li></ol><ol type="1" id="424f8977-5c66-4241-9c9e-548f6b406559" class="numbered-list" start="4"><li>Book Borrowing</li></ol><h3 id="b7df9c42-c561-41ea-b9f4-1d0b999a14f7" class="">Table (book_inventory_cache) (will be populate async using cdc)</h3><ol type="1" id="e2c6f798-3caf-46a2-94de-95ab21910960" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="dedf5e0e-a998-4e13-aac1-520c2373ade3" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="ec060551-c75b-4a2a-b204-e27c5af25896" class="numbered-list" start="3"><li>book_inventory_id: UUID</li></ol><ol type="1" id="535c70c0-9926-4ef0-a5ef-80877bd54928" class="numbered-list" start="4"><li>status: TEXT (e.g AVAILABLE, BORROWED, MISSING, OVERDUE, LOST .These will be enums in coding language)</li></ol><ol type="1" id="f24b6022-4fa4-4df7-bd4f-771401cc3f16" class="numbered-list" start="5"><li>book_ticket_item_id: UUID (ticket item id corresponding to which this book is borrowed)</li></ol><ol type="1" id="54849ccf-3b39-4422-ae64-1ec09da9ff01" class="numbered-list" start="6"><li>extended_due_time: timestamp with timezone UTC</li></ol><ol type="1" id="0bf1b92d-35f8-4f2f-8f01-c49cce28fba8" class="numbered-list" start="7"><li>deleted_at: timestamp with timezone UTC</li></ol><h3 id="e555bcff-01b0-4530-af71-cbee471f0d15" class="">Table (book_reservation)</h3><ol type="1" id="78d5b5fa-63e4-4f83-9e60-f4436da91b28" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="f7686c9d-cb47-46c8-9ec4-285178ad6426" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="7510e059-5cae-4cc4-9a0e-22758e7d1f7b" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="a37fb6ce-70ff-43b6-b2d8-ad64e5cbea6c" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="cea6309c-ba86-4bdc-959a-c607469981f4" class="numbered-list" start="5"><li>book_inventory_id: UUID REFERENCES book_inventory(id)</li></ol><ol type="1" id="17b4392c-2314-4792-a52c-03220b251f5f" class="numbered-list" start="6"><li>member_id: UUID</li></ol><ol type="1" id="addf0b13-59a4-43be-bfd4-f523fd75b503" class="numbered-list" start="7"><li>reserve_price: bigint (store price in lowest money type)<ol type="a" id="cdacb128-86fb-4abf-a30b-bd85a171996b" class="numbered-list" start="1"><li>since book_inventory price can change for future reservation. This is price at the time of reservation</li></ol><ol type="a" id="0b1553eb-6e9b-46a6-a976-dffad1d494a1" class="numbered-list" start="2"><li>We will only charge this price after borrow</li></ol></li></ol><ol type="1" id="0c600b10-9361-4cee-bf65-d46a915f4ed5" class="numbered-list" start="8"><li>status: TEXT (ACTIVE, CANCELED, FULFILLED)</li></ol><ol type="1" id="38a2578c-3a36-4ce2-9883-861c67642e39" class="numbered-list" start="9"><li>reserve_from_time: timestamp with timezone UTC</li></ol><ol type="1" id="e7413d2e-1071-4a86-a3ec-9a173d73b85f" class="numbered-list" start="10"><li>reservation_to_time: timestamp with timezone UTC</li></ol><p id="90f638e2-bd8e-41c3-a82e-8ed018275797" class="">Note: </p><ol type="1" id="83630aa2-eab3-4629-8d88-bcdca4a514ed" class="numbered-list" start="1"><li>Priority will be given based on reserve_from_time sorted ascending</li></ol><ol type="1" id="010e469d-b2e6-4990-a182-9288931a0203" class="numbered-list" start="2"><li>One can borrow book without reservation if its not already reserved for that timeframe</li></ol><ol type="1" id="7c294b24-6508-490e-ab6b-5ef97847e25b" class="numbered-list" start="3"><li>Reservation will be automatically canceled if not borrowed in certain period</li></ol><ol type="1" id="0946fbf2-a93e-44ba-b0a3-183671999b8c" class="numbered-list" start="4"><li>We will only allow reserving book 1 month in advance (configurable)</li></ol><h3 id="f674d72c-1677-4e8b-9299-0ba5ae7c9e81" class="">Table (borrow_book_ticket)</h3><ol type="1" id="132c0742-4ce2-4697-998b-d58291353eae" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="eb4d96fa-435f-4d30-91a8-2a092de6a4bb" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="524a4876-7367-41a7-b0c8-c4ad91bca6d7" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="4e820ec1-9086-4496-8285-590aa659333e" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="9512d786-007c-4f8d-bef9-97ae182b6b14" class="numbered-list" start="5"><li>member_id: UUID</li></ol><ol type="1" id="14ef1160-8a43-4511-9b63-1d414eb6fad7" class="numbered-list" start="6"><li>book_borrow_id: UUID REFERENCES borrow_book(id)</li></ol><ol type="1" id="6509beea-f76c-4ae2-be99-478ac803b25d" class="numbered-list" start="7"><li>total_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="6c068372-40f6-497f-8e8f-1e0b7bc01a9e" class="numbered-list" start="8"><li>status: TEXT (IN_PROGRESS, PAID, VOID, PAYMENT_FAILED)</li></ol><ol type="1" id="f03b46c2-0d68-4067-bfeb-2454c660b694" class="numbered-list" start="9"><li>payment_id: UUID (will come from billing service)</li></ol><h3 id="3de82e2c-8cfe-4ef8-aee8-cba50a46b102" class="">Table (borrow_book_ticket_item)</h3><ol type="1" id="2dc89b6a-ae56-4966-a5b8-7fea40d1f209" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="6e0792d4-5724-4c68-a1f2-0fc58efcc4e0" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="36464ea1-a13f-4daa-a3d2-20e7099c6382" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="8f48f165-9426-4a44-9d47-604a85709e60" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="e0b00c20-c6cb-48d3-84bb-970b22338588" class="numbered-list" start="5"><li>book_inventory_id: UUID </li></ol><ol type="1" id="41999742-480e-4af3-acc7-b4dc468d8302" class="numbered-list" start="6"><li>member_id: UUID</li></ol><ol type="1" id="15453073-787b-40c6-aa60-ea7034390bb5" class="numbered-list" start="7"><li>borrow_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="1b7afc20-869f-44c2-b22b-e70503bb19d0" class="numbered-list" start="8"><li>borrow_time: timestamp with timezone UTC</li></ol><ol type="1" id="90c4dc83-b7a7-4f94-b310-213bbb8fc8ef" class="numbered-list" start="9"><li>return_time: timestamp with timezone UTC</li></ol><ol type="1" id="cacda449-eac3-4d36-8c13-9946f32e73b7" class="numbered-list" start="10"><li>original_due_time: timestamp with timezone UTC</li></ol><ol type="1" id="8da3485e-0508-4e98-a9d6-c532bdd06246" class="numbered-list" start="11"><li>extended_due_time: timestamp with timezone UTC (initially same as original_due_time)</li></ol><ol type="1" id="4c01d69e-12ab-4592-b9d1-f11329eb4279" class="numbered-list" start="12"><li>status: TEXT (BORROWED, RETURN, OVERDUE)</li></ol><ol type="1" id="4b3e0721-2148-4cf7-959f-20cfab904a66" class="numbered-list" start="13"><li>invoice_id: UUID (this will come from billing service)</li></ol><p id="1bdc4e25-04fc-493f-b7fc-4d3b56dea37e" class="">
</p><h3 id="9464ba41-0991-44cc-855d-17582178bcf1" class="">Table (task)</h3><ol type="1" id="a0bd74d9-0f2d-4071-b220-7446795cb756" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="1c78b7b7-b26e-40f4-a0d7-e1aa9c8d48e1" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="7b2d8627-23be-43cc-9c30-75d30c98da43" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="94c3b033-3a91-412d-95e7-4d45d7f104c3" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="a26fd35c-7e73-428c-9097-1f3ebea03d7b" class="numbered-list" start="5"><li>status: TEXT (FAILED, IN_PROGRESS, SUCCESS)</li></ol><ol type="1" id="029e074f-4482-4557-99bc-6faaf6026d12" class="numbered-list" start="6"><li>name: TEXT</li></ol><h2 id="a14cb2c6-9227-40d3-bdb7-c9dfec1aa779" class="">APIs</h2><h2 id="e8374a60-4f50-4dc9-b104-de61bd54f50a" class="">Book Reservation APIs</h2><h3 id="828b07c1-e996-4d78-a8c4-5a5a0d5696a1" class="">Reserve Book (Permission: LENDING_BOOK_RESERVATION)</h3><p id="5f973845-6da3-455b-b310-0aee9fdad6b5" class=""><strong>Validation</strong></p><ul id="778898db-7185-428c-8342-4268a9683eb5" class="bulleted-list"><li style="list-style-type:disc"><strong>Reserve Book:</strong><ul id="a54bebb9-324d-49ca-8df2-acb9338b52d8" class="bulleted-list"><li style="list-style-type:circle">Check if the reservation is within the allowed advance booking period (1 month or configurable).</li></ul><ul id="5f0b9188-72a4-467c-aab7-1501b2a99fed" class="bulleted-list"><li style="list-style-type:circle">Ensure that the book is not already reserved for the specified timeframe.</li></ul><ul id="10b5e4c5-86aa-454a-ba49-8760e7d88ed9" class="bulleted-list"><li style="list-style-type:circle">Implement logic to automatically cancel reservations if not borrowed within a specified period.</li></ul><ul id="e18e5358-fdb6-4c70-9933-336755df69c4" class="bulleted-list"><li style="list-style-type:circle">Same day book reservation not allowed.</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2dc4b89b-cb2a-488e-aa0b-57d51e486a34" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/member/reservations (member api)

Request

{
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;reserve_from_time&quot;: &quot;2024-09-01T10:00:00Z&quot;,
    &quot;reservation_to_time&quot;: &quot;2024-09-15T10:00:00Z&quot;
}

Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;reserve_price&quot;: 500,
    &quot;status&quot;: &quot;ACTIVE&quot;,
    &quot;reserve_from_time&quot;: &quot;2024-09-01T10:00:00Z&quot;,
    &quot;reservation_to_time&quot;: &quot;2024-09-15T10:00:00Z&quot;
}

POST /api/tenant/{tenant_id}/lending/reservations (admin version)

Request
{
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;reserve_from_time&quot;: &quot;2024-09-01T10:00:00Z&quot;,
    &quot;reservation_to_time&quot;: &quot;2024-09-15T10:00:00Z&quot;
}
Response

{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;reserve_price&quot;: 500,
    &quot;status&quot;: &quot;ACTIVE&quot;,
    &quot;reserve_from_time&quot;: &quot;2024-09-01T10:00:00Z&quot;,
    &quot;reservation_to_time&quot;: &quot;2024-09-15T10:00:00Z&quot;
}
</code></pre><h3 id="510a7167-af3f-41ae-95b3-7c0a2772a739" class="">Cancel Reservation (Permission: LENDING_BOOK_CANCEL_RESERVATION)</h3><ul id="2fbaa68a-14f0-440d-b2de-d3d74b7d2688" class="bulleted-list"><li style="list-style-type:disc"><strong>Cancel Reservation:</strong><ul id="70b6a111-2229-4efa-8a24-10ae3e6c7c09" class="bulleted-list"><li style="list-style-type:circle">Only allow cancellation of reservations that are currently active.</li></ul><ul id="c574a8f5-e159-4d82-ae78-bd7562e990a2" class="bulleted-list"><li style="list-style-type:circle">Update the status to &quot;CANCELED&quot; and record the updated timestamp.</li></ul></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="4dad9c8b-6562-4b7c-83e8-2543e94667bd" class="code"><code class="language-JavaScript">DELETE /api/tenant/{tenant_id}/lending/reservations/{id}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;tenant_id&quot;: &quot;UUID&quot;,
    &quot;status&quot;: &quot;CANCELED&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T14:00:00Z&quot;
}

</code></pre><h2 id="419eed4c-5225-4d34-aee9-f87442471ba1" class="">Book Borrowing APIs</h2><h3 id="84fd38a0-5754-4e28-8a2f-b37fb9e3d5ed" class="">Create Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</h3><p id="42314538-841b-41d3-8d66-bea17b0fd0fe" class="">Validation</p><ul id="08aa1e3d-5e8b-46c7-8a38-6385b5ff52e1" class="bulleted-list"><li style="list-style-type:disc">Check if there is existing open ticket, if so then return that</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="45062a5d-6ca4-4fe2-8d96-cac7fb2d81f6" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/borrow_book_tickets

Request
{
    &quot;member_id&quot;: &quot;UUID&quot;,
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;total_price&quot;: 0,
    &quot;currency_code&quot;: &quot;USD&quot;
    &quot;status&quot;: &quot;IN_PROGRESS&quot;,
    &quot;payment_id&quot;: null
}</code></pre><h3 id="b5a98b75-c04a-4719-addf-aac7d7a56c3b" class="">Add Books to Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</h3><p id="1c70e532-95a4-4a6a-8c75-f2707591d4a9" class="">Validation</p><ul id="083638fd-724b-46d2-a76f-d86f0400c5d1" class="bulleted-list"><li style="list-style-type:disc">Check if book is not reserved during this time</li></ul><ul id="8f6c9c1d-57d6-4b62-a08f-9d0aec558108" class="bulleted-list"><li style="list-style-type:disc">Book can be borrowed without reservation</li></ul><ul id="57a42604-c4e5-4f2e-b23c-2fc148a7b751" class="bulleted-list"><li style="list-style-type:disc">validate book has available status</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="3664cd9d-f71d-49fd-950f-d062488490df" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/borrow_book_tickets/{ticket_id}/items

{
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
    &quot;book_inventory_id&quot;: &quot;UUID&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;borrow_price&quot;: 500,
    &quot;borrow_time&quot;: &quot;2024-08-01T10:00:00Z&quot;,
    &quot;return_time&quot;: null,
    &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
    &quot;status&quot;: &quot;BORROWED&quot;,
    &quot;invoice_id&quot;: null,
    &quot;ticket_id&quot;: &quot;UUID&quot;
}</code></pre><h3 id="435b47f0-f7c2-4ecd-972e-00c851841251" class="">Get Borrow Book Ticket (Permission: LENDING_BOOK_BORROW)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="5c821a7b-5b9a-4228-a972-3cfb21cd2c68" class="code"><code class="language-JavaScript">GET /api/tenant/{tenant_id}/lending/borrow_book_tickets/{ticket_id}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;tenant_id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:40:00Z&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;total_price&quot;: 1000,
    &quot;status&quot;: &quot;PAID&quot;,
    &quot;payment_id&quot;: &quot;payment_id_from_billing_service&quot;,
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;UUID1&quot;,
            &quot;tenant_id&quot;: &quot;UUID&quot;,
            &quot;created_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
            &quot;updated_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
            &quot;book_inventory_id&quot;: &quot;UUID1&quot;,
            &quot;member_id&quot;: &quot;UUID&quot;,
            &quot;borrow_price&quot;: 500,
            &quot;borrow_time&quot;: &quot;2024-08-01T10:00:00Z&quot;,
            &quot;return_time&quot;: null,
            &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
            &quot;status&quot;: &quot;BORROWED&quot;,
            &quot;invoice_id&quot;: &quot;UUID1&quot;
        },
        {
            &quot;id&quot;: &quot;UUID2&quot;,
            &quot;tenant_id&quot;: &quot;UUID&quot;,
            &quot;created_at&quot;: &quot;2024-08-01T12:36:00Z&quot;,
            &quot;updated_at&quot;: &quot;2024-08-01T12:36:00Z&quot;,
            &quot;book_inventory_id&quot;: &quot;UUID2&quot;,
            &quot;member_id&quot;: &quot;UUID&quot;,
            &quot;borrow_price&quot;: 500,
            &quot;borrow_time&quot;: &quot;2024-08-01T10:00:00Z&quot;,
            &quot;return_time&quot;: null,
            &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
            &quot;status&quot;: &quot;BORROWED&quot;,
            &quot;invoice_id&quot;: &quot;UUID2&quot;
        }
    ]
}
</code></pre><h3 id="51c716fd-2509-406c-b1cd-9edf7cc68705" class="">Make payment for Borrow book ticket (Permission: LENDING_BOOK_RETURN)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="945b6fa3-0dc0-4daa-99d1-62cce6ad1242" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/borrow_book_tickets/{ticket_id}/make_payment
We will poll on status to verify if payment is done

Response 
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;tenant_id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T12:40:00Z&quot;,
    &quot;member_id&quot;: &quot;UUID&quot;,
    &quot;total_price&quot;: 1000,
    &quot;status&quot;: &quot;IN_PROGRESS&quot;,
    &quot;payment_id&quot;: &quot;payment_id_from_billing_service&quot;,
    &quot;items&quot;: [
        {
            &quot;id&quot;: &quot;UUID1&quot;,
            &quot;tenant_id&quot;: &quot;UUID&quot;,
            &quot;created_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
            &quot;updated_at&quot;: &quot;2024-08-01T12:35:00Z&quot;,
            &quot;book_inventory_id&quot;: &quot;UUID1&quot;,
            &quot;member_id&quot;: &quot;UUID&quot;,
            &quot;borrow_price&quot;: 500,
            &quot;borrow_time&quot;: &quot;2024-08-01T10:00:00Z&quot;,
            &quot;return_time&quot;: null,
            &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
            &quot;status&quot;: &quot;BORROWED&quot;,
            &quot;invoice_id&quot;: &quot;UUID1&quot;
        },
        {
            &quot;id&quot;: &quot;UUID2&quot;,
            &quot;tenant_id&quot;: &quot;UUID&quot;,
            &quot;created_at&quot;: &quot;2024-08-01T12:36:00Z&quot;,
            &quot;updated_at&quot;: &quot;2024-08-01T12:36:00Z&quot;,
            &quot;book_inventory_id&quot;: &quot;UUID2&quot;,
            &quot;member_id&quot;: &quot;UUID&quot;,
            &quot;borrow_price&quot;: 500,
            &quot;borrow_time&quot;: &quot;2024-08-01T10:00:00Z&quot;,
            &quot;return_time&quot;: null,
            &quot;due_time&quot;: &quot;2024-08-15T10:00:00Z&quot;,
            &quot;status&quot;: &quot;BORROWED&quot;,
            &quot;invoice_id&quot;: &quot;UUID2&quot;
        }
    ]
}</code></pre><h3 id="d342d3f0-1d71-476d-bf8c-c42149646fa9" class="">Return Book (Permission: LENDING_BOOK_RETURN)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="fb433b98-6db1-4f5e-85de-ff9bcb5ffb22" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/books/{book_inventory_id}/return

Response 204 No content
</code></pre><h3 id="700271e3-d00d-42fd-8e8c-ff22fa536904" class="">Extend Book Borrowing period (Permission: LENDING_BOOK_BORROW)</h3><ul id="10110e04-b1c8-4f04-ab92-44433ad7956e" class="bulleted-list"><li style="list-style-type:disc">Extension will not be allowed if there upcoming reservation</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="7e84a35d-be1d-4100-beca-146aef0eec9a" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/lending/books/{book_inventory_id}/extend

Request
{
   &quot;to_time&quot;: &quot;2024-08-01T12:35:00Z&quot;
}

Response 204 No content
</code></pre><h3 id="94a414b4-72b7-4a89-a5f8-a5efff2d6fa0" class="">Get Task (Permission: LENDING_TASK)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1b1fa1e7-c546-4656-afb5-28e24ae49d8b" class="code"><code class="language-JavaScript">GET /api/tenant/{tenant_id}/lending/tasks/{id}

Response
{
    &quot;id&quot;: &quot;UUID&quot;,
    &quot;tenant_id&quot;: &quot;UUID&quot;,
    &quot;created_at&quot;: &quot;2024-08-01T12:34:56Z&quot;,
    &quot;updated_at&quot;: &quot;2024-08-01T13:00:00Z&quot;,
    &quot;status&quot;: &quot;IN_PROGRESS&quot;,
    &quot;name&quot;: &quot;Sample Task&quot;
}
</code></pre><h3 id="c851eeb8-9d8e-40af-a552-6241a3b1d2ca" class="">Background Jobs</h3><ol type="1" id="79bbe084-931b-429c-bf47-70da374e9cbb" class="numbered-list" start="1"><li>Mark books overdue if they are outside lending period and send notification</li></ol><ol type="1" id="05b19373-3e8c-4563-8055-c959bcfcdfe8" class="numbered-list" start="2"><li> Send notifications for which due dates are nearby</li></ol><ol type="1" id="c9830d7e-27f8-4821-975a-b4a6ad3d8d9f" class="numbered-list" start="3"><li>Auto extend book by one day if overdue <ol type="a" id="2e708c18-6cad-463a-87ff-a671ea13669f" class="numbered-list" start="1"><li>Create invoice</li></ol><ol type="a" id="f777617f-21f1-4ed2-9524-20b20d840caf" class="numbered-list" start="2"><li>Charge payment</li></ol><ol type="a" id="c3e07751-f510-430e-8c51-d9c698adb01f" class="numbered-list" start="3"><li>send notification</li></ol></li></ol><ol type="1" id="f23421e4-f50f-4e3a-a4c8-a906c40d50c7" class="numbered-list" start="4"><li>Send notification for failed payments</li></ol><h1 id="d2b4c627-c446-4e80-9f6d-fe23dd12fb41" class="">Search  Service</h1><p id="1722f113-c0fc-4975-acb5-498d18e60604" class="">API for these will hit elastic search</p><h2 id="580314fe-6405-408a-b151-b6e0b4312e14" class="">APIs</h2><ol type="1" id="2fc9a039-a45d-4ae4-bb1c-f839d688255f" class="numbered-list" start="1"><li>Search book by name</li></ol><ol type="1" id="b2827d9d-69e7-4ff1-80be-e5ace9e90ffe" class="numbered-list" start="2"><li>Filter book by availability status for given time range</li></ol><ol type="1" id="d0782f57-7f90-4990-9a37-9cad1f033845" class="numbered-list" start="3"><li>API to view when book is available (i.e not reserved)</li></ol><ol type="1" id="4221ec3b-10d5-4eec-8859-d8f190d0575f" class="numbered-list" start="4"><li>API to perform CRUD in elastic search (will be used by workflows)</li></ol><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="f20b3871-711f-44ee-a9ec-5f37bd2b35d1" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/books/search

{
  &quot;name&quot;: {
    &quot;operator&quot;: &quot;ilike&quot;,
    &quot;value&quot;: &quot;Harry porter&quot;
  },
  &quot;status&quot;: {
    &quot;operator&quot;: &quot;eq&quot;,
    &quot;value&quot;: &quot;available&quot;
  },
  &quot;author&quot;: {
    &quot;operator&quot;: &quot;ilike&quot;,
    &quot;value&quot;: &quot;Jon Doe&quot;
  }
}</code></pre><h1 id="d9bcfe7a-6c41-41a0-b2d6-3624202909b3" class="">Billing Service</h1><ol type="1" id="19ab3f6b-9e07-478f-9fbc-7adde7392986" class="numbered-list" start="1"><li>Charge borrowing fees</li></ol><ol type="1" id="46b253c5-bb01-416b-8cd1-607b4ab8a15d" class="numbered-list" start="2"><li>Charge late fee</li></ol><ol type="1" id="5b0262f8-bc20-4759-b790-b43debbdf5cc" class="numbered-list" start="3"><li>Get all payment history for member</li></ol><ol type="1" id="e3363ef7-4fa1-4d30-8525-73b5d44f57c8" class="numbered-list" start="4"><li>Get fee corresponding to borrow id</li></ol><h3 id="3ac9ee67-e243-4d1d-9823-f1272a271943" class="">Table (invoice)</h3><ol type="1" id="3385b0cf-9f83-4256-b1e4-1f4ac6f2d58a" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="f550633e-92bf-43d1-92c2-a9ecd7921c80" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="949a977a-c841-4840-962b-cb8938cad1fb" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="a83eca5c-9ae3-40f2-83d2-09b5feea0e17" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="06e1ffdc-15b2-4ba5-8a37-4c76d4fa94d6" class="numbered-list" start="5"><li>name: TEXT (autogenerated unique invoice number)</li></ol><ol type="1" id="cd22967f-202f-485b-8851-c15b2686fe60" class="numbered-list" start="6"><li>user_id: UUID</li></ol><ol type="1" id="40cbf98a-f5b7-421e-bec7-7553cfd6377f" class="numbered-list" start="7"><li>total_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="3b42b0ad-4b30-40e5-8886-10784ceedb74" class="numbered-list" start="8"><li>status: TEXT (DRAFT, PAID, PAYMENT_FAILED)</li></ol><ol type="1" id="e4b32320-ef89-4f8f-a911-86fda1564c90" class="numbered-list" start="9"><li>payment_id: UUID REFERENCES payment(id)</li></ol><h3 id="84464c19-4389-40ea-9e73-93a8838f3c17" class="">Table (invoice_item)</h3><ol type="1" id="1aebcd2b-e3b2-44da-83e3-9ae1b0269e85" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="5c6d4c87-d66c-49c4-880a-afa843e4309c" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="b7fb5bcc-af98-4f76-aca8-023dbda7b788" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="0740588e-410a-4760-8700-f9f2503f039f" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="de9a274b-74d0-4b92-8253-af33e201a1e9" class="numbered-list" start="5"><li>invoice_id: UUID REFERENCES invoice(id)</li></ol><ol type="1" id="24b4e19f-52a0-415a-8561-c4f64baabe78" class="numbered-list" start="6"><li>entity_id: UUID (Generic id, in this case this will be book_inventory_id)</li></ol><ol type="1" id="3ce79da7-140f-4901-9c36-a117f6f85d27" class="numbered-list" start="7"><li>member_id: UUID<strong> (This should not be here)</strong></li></ol><ol type="1" id="f6f3ea37-2e34-479a-9e73-ea1e12701e65" class="numbered-list" start="8"><li>price: bigint (store price in lowest money type)</li></ol><ol type="1" id="e6eaa327-b89f-404a-a2aa-63025876604d" class="numbered-list" start="9"><li>type: TEXT (e.g REGULAR_FEE, LATE_FEE, OTHER_FEE)</li></ol><ol type="1" id="ed6fe18c-06bc-489c-a4ff-9846cb991a98" class="numbered-list" start="10"><li>notes: TEXT (Notes corresponding to type of fee if any)</li></ol><ol type="1" id="e47340e4-b9d0-4c76-b0c2-107ff324f622" class="numbered-list" start="11"><li>status: TEXT (PAID or UNPAID)</li></ol><h3 id="593a2b5b-64d0-46d9-b746-d318c15ff37b" class="">Table (payment_methods)</h3><ol type="1" id="2567226a-60a6-4e9d-b321-5f5899177e1d" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="e83bede5-95f2-4476-b717-185fbf2b4daf" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="61bfe256-0413-460d-892f-1741b70d80cd" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="210a6eb2-fbf4-4a85-a1da-2e5916e7eb68" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="6e2b300b-aff4-4cd2-bad6-1c5b8c8c4ff4" class="numbered-list" start="5"><li>user_id: UUID</li></ol><ol type="1" id="c6681822-afff-4e67-aafe-b4e3a6d97936" class="numbered-list" start="6"><li>external_payment_provider_customer_id: TEXT</li></ol><ol type="1" id="ca79fc0e-8752-467e-aab3-0ec732740ab2" class="numbered-list" start="7"><li>external_payment_method_id: TEXT</li></ol><p id="e701eec2-da76-440e-9f98-393910dca191" class="">
</p><h3 id="6d0c27fc-55cf-42d1-8f80-38db40e3631b" class="">Table (payment)</h3><ol type="1" id="f7bb38ec-a215-405a-8ef1-fcab71530d1d" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="d6df1b0a-cf24-460d-9645-105672d286ee" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="e4eafced-8b81-4675-924a-0f4ae647b0df" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="219b3d91-72aa-4439-9167-e4a4aa8c74ce" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="26a6ae07-fb84-4b62-bc66-cbfd8f4ef63e" class="numbered-list" start="5"><li>type: TEXT (CREDIT_CARD, CASH, DEBIT_CARD)</li></ol><ol type="1" id="286e7084-e319-447b-b824-920fcbe78045" class="numbered-list" start="6"><li>price: bigint (store price in lowest money type)</li></ol><ol type="1" id="d989ae25-a39f-4bde-88dd-a99ddfe04e43" class="numbered-list" start="7"><li>tax: bigint (store price in lowest money type)</li></ol><ol type="1" id="e86d3691-fe80-44d6-93e2-241e4b812577" class="numbered-list" start="8"><li>total_price: bigint (store price in lowest money type)</li></ol><ol type="1" id="ee396c07-a78c-4f6b-b248-aeffefd56a6c" class="numbered-list" start="9"><li>external_payment_id: TEXT (ID corresponding to external payment gateway e.g stripe)</li></ol><h2 id="0f2aa894-84bf-44a4-ba52-dafd0b13542a" class="">APIs</h2><ul id="fe508602-f729-469d-b549-6bb50cfce8c0" class="bulleted-list"><li style="list-style-type:disc">This contains normal crud APIs</li></ul><h3 id="013ea452-3078-4139-81f2-e3f1a2bb37ee" class="">Create Invoice (Permission: BILLING_INVOICE_CREATE)</h3><h3 id="23d3a0c1-b893-48db-9585-c59f024b5896" class="">Update Invoice (Permission: BILLING_INVOICE_UPDATE)</h3><h3 id="fbab91f0-c0f4-4e2c-9cc0-b941c9d23f3c" class="">Get Invoice (Permission: BILLING_INVOICE_READ)</h3><h3 id="408fcbf5-2fa4-4520-8ce6-0879c6ae0053" class="">Get Invoices (Permission: BILLING_INVOICE_READ_ALL)</h3><ol type="1" id="387c5567-326d-49d6-95dd-75e5fc53078a" class="numbered-list" start="1"><li>This will have various filters</li></ol><h3 id="08e54476-0e00-44dc-b5e4-30fe2f9496b5" class="">Delete Invoice (Permission: BILLING_INVOICE_DELETE)</h3><h1 id="ae2d6104-1250-416b-9039-418658d32e6c" class="">Config Service</h1><p id="ed848235-7514-4be4-84d0-c0f2e1edb1ef" class="">Used for various configuration across microservices</p><h3 id="f3e76c69-a7ab-4a00-867b-b813f97a2725" class="">Table (config)</h3><ol type="1" id="d46d882d-984a-4b00-a6b3-cd652669ced1" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="355ca0b6-efd9-4540-8757-ae56edfabfe1" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="01348715-34ed-41ad-8253-2dd8047ad7d6" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="46872c52-9f90-43aa-a820-1d9e4c52bd13" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="794ce846-9bf5-4cbc-b458-37e260681cea" class="numbered-list" start="5"><li>service_type: TEXT (e.g BILLING, BOOK, BOOK_RESERVATION, LENDING, ANALYTICS etc)</li></ol><ol type="1" id="c0c17463-ea81-4858-8028-7ec0ca79809f" class="numbered-list" start="6"><li>key: TEXT</li></ol><ol type="1" id="5fbcdc9f-3fc1-4571-88d3-cb7bef9b5818" class="numbered-list" start="7"><li>argument: jsonb</li></ol><ol type="1" id="69e30f93-8514-4b30-a471-e3418e33e604" class="numbered-list" start="8"><li>enabled: boolean</li></ol><h3 id="be52b869-ea08-432c-ae8b-d0c94eaf9146" class="">APIs</h3><ul id="1b225062-f4dc-4774-853f-9c89a1977bd6" class="bulleted-list"><li style="list-style-type:disc">This contains normal crud APIs</li></ul><h1 id="73e4a94d-b434-401a-9f68-3eb7ba7912e3" class="">Notification Service</h1><h3 id="3ab0f694-59ea-47d0-83b1-36524243e787" class="">Table (subscription)</h3><ol type="1" id="e5983a10-8c82-4e63-9790-9609c02c1a3d" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="5adee48f-f04b-4b04-a7b4-6fa4cd672431" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="526cf4b4-6ff2-4976-8388-fd2360e6993d" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="e06cc660-5e9d-4fda-8d6c-e2e0c7330e42" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="0db7fccc-e6aa-4282-96c2-19343fb8e7db" class="numbered-list" start="5"><li>type: array(string) (EMAIL, TEXT, WEB, MOBILE)</li></ol><ol type="1" id="c3175f4d-75fa-4d66-9080-8aae6bd71883" class="numbered-list" start="6"><li>user_id: UUID</li></ol><h3 id="b468ff73-535a-4069-a05f-40d67caea769" class="">Table (notification_history)</h3><ol type="1" id="4188e13d-c56a-44c2-a8de-52a6041978b4" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="644fd927-c7f3-4c9c-a64d-d7bc4ae08640" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="414d1f7f-5842-4530-8226-41027b5d6f43" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="06020b64-90c2-454e-8899-af8f8977c52f" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="9acaf314-3e7a-4b82-8d06-4f61413f746c" class="numbered-list" start="5"><li>user_id: UUID</li></ol><ol type="1" id="f96c11e8-ee81-4a14-b7ae-b0941d2ac0af" class="numbered-list" start="6"><li>type: TEXT (EMAIL, TEXT, WEB, MOBILE)</li></ol><ol type="1" id="35a671f2-c16c-4a80-b179-9298c357f413" class="numbered-list" start="7"><li>message: TEXT</li></ol><h3 id="f549ff14-b683-480b-8b8d-af03c20bd0ac" class="">APIs</h3><ul id="86703318-171c-4e20-86ac-9e73632a5db6" class="bulleted-list"><li style="list-style-type:disc">This contains normal crud APIs</li></ul><h1 id="0e768191-dbb4-4fc5-8aca-08d28fc26eb1" class="">Workflow Service</h1><ol type="1" id="5388bf2b-b67b-4913-bcb5-f32ca86b80c1" class="numbered-list" start="1"><li>List all workflows</li></ol><ol type="1" id="8af8acb3-a040-4296-aa21-3121c4f983ba" class="numbered-list" start="2"><li>Workflow contains list of actions in some order</li></ol><ol type="1" id="1e38a3e0-bc28-4a9f-a932-5bb989ad9b2b" class="numbered-list" start="3"><li>We need to register actions</li></ol><ol type="1" id="3b9143bd-10fe-40ce-a1fe-df5fb31bcd5d" class="numbered-list" start="4"><li>action registration should know when that action can be triggered<ol type="a" id="1a5ef2f2-f062-4d84-b100-47d92cb1b07d" class="numbered-list" start="1"><li>can action start on their own with any other input e.g get all books (this can be triggered anytime irrespective of where it is in flow)</li></ol><ol type="a" id="df9663b0-e23a-4c6f-bb63-9cecd2f08149" class="numbered-list" start="2"><li>validating action input</li></ol><ol type="a" id="b33d3094-e03a-4071-b39f-33fb67863b34" class="numbered-list" start="3"><li>keeping track of action output</li></ol></li></ol><ol type="1" id="833d3e1f-cbca-4c51-bb9e-dd58dabf0684" class="numbered-list" start="5"><li>Custom output per action based on condition e.g if value &gt; 0 then return APPROVE</li></ol><h3 id="25e60a5d-d0a0-411b-872d-161d4fd3ccd8" class="">Table (workflow)</h3><ol type="1" id="54a0d551-5662-41ea-b0ea-e4171b42d460" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="f27bdd1a-d9ab-45d3-9c0b-b1fcd2c1cce4" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="acb5091c-cfd9-4f88-a54d-4b627e885489" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="1f5214e9-96fa-48c3-b4dc-3169a4b265ae" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="668c5073-be1b-4ced-bd8c-e174f4182600" class="numbered-list" start="5"><li>definition: JSONB NOT NULL,</li></ol><ol type="1" id="77597925-4e77-42f1-9118-983a4d866f23" class="numbered-list" start="6"><li>input_output_schema: jsonb</li></ol><ol type="1" id="dab3428a-0e35-4e4d-97c2-468018245216" class="numbered-list" start="7"><li>name: TEXT</li></ol><ol type="1" id="d95adcf1-3d2a-470a-aa1a-dcad863cf60d" class="numbered-list" start="8"><li>description: TEXT</li></ol><ol type="1" id="99cde22a-f67e-405a-be76-490f2a27879a" class="numbered-list" start="9"><li>UNIQUE(tenant_id, name)</li></ol><h3 id="da032362-218f-4cfe-b5da-df421f90c615" class="">Table (permission)</h3><ol type="1" id="48d514b3-26e7-48b4-a1e3-656688d8679f" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="ff877649-fdb2-407a-ae12-128a2c2829a5" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="7b57a665-ce15-4f0c-abd6-6ca59719e508" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="e7d47f73-4775-494f-bc11-1dfe1007294d" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="809bfca5-abc8-4141-8f35-66a053314773" class="numbered-list" start="5"><li>name: TEXT </li></ol><ol type="1" id="3e71f55d-4f66-4784-9fd0-7e82322413e7" class="numbered-list" start="6"><li>UNIQUE(tenant_id, name)</li></ol><h3 id="a0695db2-d05d-44ea-b49b-5f602997dbb6" class="">Table (workflow_permission)</h3><ol type="1" id="bdc465f3-0cc1-4fac-8dbd-3a8360496793" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="e71c3ad8-57c9-41b2-8b49-af8248da55aa" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="4fb2b61f-fcf3-4d1c-b2a8-e978f0cba9a9" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="f354ac32-85aa-4e24-ad43-f1b65b6f533a" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="110f4bd5-984f-4d6d-af13-b027f0db2938" class="numbered-list" start="5"><li>workflow_id: UUID REFERENCES workflow(id)</li></ol><ol type="1" id="4f32ef8e-1a43-417d-9f42-8f96e5590731" class="numbered-list" start="6"><li>permission_id: UUID REFERENCES permission(id)</li></ol><h3 id="1d4ccc2a-7cc8-465c-9e85-4a0c89745224" class="">Table (workflow_user_permission)</h3><ol type="1" id="145a7039-f351-4f45-be3e-5567f3e57af7" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="e96848ed-14e8-4ce2-a8cd-f1f781c9dee8" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="e2d108fe-b6d1-41ec-af32-dfc52113f12e" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="6f78db67-5d4d-4ab2-b816-0ab8ade35f86" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="103bfd08-ae96-42f8-86cb-50318572a694" class="numbered-list" start="5"><li>user_id: UUID </li></ol><ol type="1" id="bbd3c85b-2dfe-48dc-bb37-6574b6cf799b" class="numbered-list" start="6"><li>permission_id: UUID REFERENCES permission(id)</li></ol><p id="cbefa8c1-c3fd-48b0-87ac-e320a23a5625" class="">
</p><h3 id="168fed51-6a8a-4d5b-902a-d417800bf913" class="">Table (action)</h3><ol type="1" id="cdfa32c9-b474-4a96-aae3-7bb0114cfd5b" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="a86c791a-64c5-45ac-8232-e84c1b758bae" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="b666c9b4-3347-44e9-b246-7f7f1ad270ea" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="eccd92e2-0626-440e-b056-202fd78390c1" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="ba885622-c07a-4e16-817f-35d96a639089" class="numbered-list" start="5"><li>name: TEXT </li></ol><ol type="1" id="7d16103c-2feb-419c-84c2-6ddaa777b1ed" class="numbered-list" start="6"><li>description: TEXT</li></ol><ol type="1" id="ceabc163-2b7b-4abc-aceb-0db21053ad56" class="numbered-list" start="7"><li>function_unique_id: UUID — This will be defined in function schema json</li></ol><ol type="1" id="a18ba3f9-9af0-4978-a260-4d8be2831de3" class="numbered-list" start="8"><li>function_name TEXT NOT NULL</li></ol><ol type="1" id="499da6c7-e2ee-4e99-a186-63f2f41c374a" class="numbered-list" start="9"><li>schema: jsonb<ol type="a" id="6eb4303a-074c-456e-a0ad-252d080b9303" class="numbered-list" start="1"><li>We will have schema files for each function which will generate code and on upgrade this will get updated.</li></ol><ol type="a" id="16f073b1-8d0f-43df-8025-5e6baf52a7af" class="numbered-list" start="2"><li>Function unique id will be defined in file.</li></ol></li></ol><ol type="1" id="e8f90097-2bbc-4957-86dd-c56565d0aa23" class="numbered-list" start="10"><li>UNIQUE(tenant_id, function_unique_id)</li></ol><h3 id="22f77f52-c540-4b9b-ad24-bbadc51fb03f" class="">Table (workflow_trigger)</h3><ol type="1" id="3f6d2e76-d2c3-45a8-94fb-4b95b3903196" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="523e80ae-1bc4-4837-873d-03257481be5f" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="1ef230c7-a4c1-44ea-bf9e-9d215db0210e" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="827d5254-5472-4c75-b35b-f43268b9e8e6" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="f38d93f5-e7f6-4e21-80be-1825974604f4" class="numbered-list" start="5"><li>event_id: UUID REFENCES event(id)</li></ol><ol type="1" id="75417b8b-1a66-47ed-b099-6bb2df2618cb" class="numbered-list" start="6"><li>workflow_id: UUID</li></ol><h3 id="637cb975-4d67-48e0-afa5-42f0959f297c" class="">Table (event)</h3><ol type="1" id="3c830a9a-516e-4457-b18e-fe74dee7a247" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="ba6b9e3b-a984-4609-834a-90cfbcf87b2e" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="7a850d3b-f824-4005-957f-6daaf0d14fe6" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="30388676-18b9-4d98-8db3-96f0ce260389" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="c58e2a97-5ad7-4990-a9e9-3b0b3479a196" class="numbered-list" start="5"><li>name: TEXT</li></ol><h3 id="f0563d68-2a5f-4b96-ad5f-9dccce3348e9" class="">Table (workflow_execution_history)</h3><ol type="1" id="1a27d76a-fb68-4516-9577-f2eee4f6ff6d" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="015433f0-01d4-4587-9cd4-2411517a5477" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="29ff5f97-b8a1-45f1-950d-fb3b374650a3" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="c8302eba-068b-4d2d-b611-b3a3b4eddbc7" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="94a01da7-32fd-4cd3-88ed-c63fbb513975" class="numbered-list" start="5"><li>workflow_id: UUID REFERENCES workflow(id)</li></ol><ol type="1" id="023fbd2c-d80e-470b-aff7-79e8ff3ca4ee" class="numbered-list" start="6"><li>user_id: UUID</li></ol><ol type="1" id="17c93ef3-10b5-4484-bb0f-d18c3efbf149" class="numbered-list" start="7"><li>input_parameters: jsonb — input values will be persisted for each workflow </li></ol><ol type="1" id="bb19e382-a316-4a34-8479-6136f1b6f1d9" class="numbered-list" start="8"><li>output_result: jsonb — result will be persisted for each workflow</li></ol><h3 id="e2eeeaf6-846e-48c1-b71e-431d43a8930b" class="">Table (action_execution_history)</h3><ol type="1" id="4187452b-a716-48e2-9d19-6f1844dd426d" class="numbered-list" start="1"><li>id: UUID PRIMARY KEY</li></ol><ol type="1" id="016a5eea-c21f-43ef-8875-68d102fe942d" class="numbered-list" start="2"><li>tenant_id: UUID</li></ol><ol type="1" id="d64556a7-449c-45e3-8052-942681c1f7ec" class="numbered-list" start="3"><li>created_at: timestamp with timezone UTC</li></ol><ol type="1" id="bd9a44cd-9ffb-4efc-b847-97f2b5a14b3d" class="numbered-list" start="4"><li>updated_at: timestamp with timezone UTC</li></ol><ol type="1" id="b8e26226-d7b2-4034-94f0-b3b8b04b4a54" class="numbered-list" start="5"><li>workflow_id: UUID REFERENCES workflow(id)</li></ol><ol type="1" id="6ef2ec26-e745-463f-8434-7e0fc28767ae" class="numbered-list" start="6"><li>action_id: UUID REFERENCES action(id)</li></ol><ol type="1" id="5a0879b2-40fe-4ab7-8bbe-3c8aadc3436e" class="numbered-list" start="7"><li>user_id: UUID</li></ol><ol type="1" id="7da4d5af-8a9c-4ab0-b3c2-4c715d57b753" class="numbered-list" start="8"><li>input_parameters: jsonb — input values will be persisted for each action </li></ol><ol type="1" id="92c4d4c5-c5a3-4d17-8762-c2ec1dfd9caf" class="numbered-list" start="9"><li>output_result: jsonb — result will be persisted for each action</li></ol><h3 id="489c7c17-68d8-4718-863d-935aaf278042" class=""><strong>Action Schema files</strong></h3><ul id="c0f142fb-a60d-4749-b29e-5957a21c7510" class="bulleted-list"><li style="list-style-type:disc">parametersSchema: json schema , this will help us validate parameter easily</li></ul><ul id="62f5a65e-e977-4db8-bd8e-e29e4187a923" class="bulleted-list"><li style="list-style-type:disc">returnTypeSchema: json schema , this will help us validate parameter easily</li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="2f3cc0d5-5e01-41c5-87b0-36017209ff97" class="code"><code class="language-JavaScript">File getAllUsersAction.json

{
      &quot;id&quot;: &quot;1&quot;,
      &quot;name&quot;: &quot;Get All Users&quot;,
      &quot;description&quot;: &quot;Fetch all users&quot;,
      &quot;functionName&quot;: &quot;getAllUsers&quot;,
      &quot;parametersSchema&quot;: [],
      &quot;returnType&quot;: &quot;List&lt;User&gt;&quot;
      &quot;returnTypeSchema&quot;: {
				  &quot;type&quot;: &quot;array&quot;,
				  &quot;items&quot;: {
				    &quot;type&quot;: &quot;object&quot;,
				    &quot;properties&quot;: {
				      &quot;id&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      },
				      &quot;first_name&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      },
				      &quot;last_name&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      }
				    },
				    &quot;required&quot;: [
				      &quot;id&quot;,
				      &quot;first_name&quot;
				    ]
				  }
			}

}

File getOverdueBooksForUserAction.json

{
      &quot;id&quot;: &quot;2&quot;,
      &quot;name&quot;: &quot;Get Overdue Books for User&quot;,
      &quot;description&quot;: &quot;Fetch overdue books for a user&quot;,
      &quot;functionName&quot;: &quot;getOverdueBooksForUser&quot;,
      &quot;parametersSchema&quot;: [
        {&quot;name&quot;: &quot;userId&quot;, &quot;type&quot;: &quot;UUID&quot;}
      ],
      &quot;returnType&quot;: &quot;List&lt;Book&gt;&quot;
      &quot;returnTypeSchema&quot;: {
				  &quot;type&quot;: &quot;array&quot;,
				  &quot;items&quot;: {
				    &quot;type&quot;: &quot;object&quot;,
				    &quot;properties&quot;: {
				      &quot;id&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      },
				      &quot;name&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      },
				      &quot;author_id&quot;: {
				        &quot;type&quot;: &quot;string&quot;
				      }
				    },
				    &quot;required&quot;: [
				      &quot;id&quot;,
				      &quot;first_name&quot;
				    ]
				  }
			}
    }</code></pre><p id="92e290b5-43ea-4aca-99ce-a744fda2bc9f" class="">Using above schema files we will auto generate java code e.g </p><p id="0b919038-30be-41c3-acc5-a8121d7f15e8" class=""><strong>ActionFactory.java</strong></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="d076c935-feb5-47ac-9e88-99f9d2b040b2" class="code"><code class="language-JavaScript">public interface ActionFactory {

    @Action(name = &quot;Get All Users&quot;, description = &quot;Fetch all users&quot;, parameterTypes = {}, returnType = List.class)
    public List&lt;User&gt; getAllUsers();
    
    @Action(name = &quot;Get Overdue Books for User&quot;, description = &quot;Fetch overdue books for a user&quot;, parameterTypes = {String.class}, returnType = List.class)
    public List&lt;Book&gt; getOverdueBooksForUser(String userId);</code></pre><ul id="21f61980-595c-4f34-a79c-df065973638a" class="bulleted-list"><li style="list-style-type:disc">We can now implement each action in <code>ActionFactoryImpl</code></li></ul><ul id="69849526-7b61-4569-b731-ec9d459db3b5" class="bulleted-list"><li style="list-style-type:disc">This way we can maintain consistency in db and code regarding actions</li></ul><ul id="e59dbffe-890b-4140-8476-3e30ce4c6e4d" class="bulleted-list"><li style="list-style-type:disc"></li></ul><p id="9e868668-f5bc-4e35-b5da-dd0be446ee95" class="">
</p><h2 id="4b359a44-6c2f-4efc-9897-510b47acb9af" class="">Workflow definition </h2><p id="a5d392e7-3c3a-4999-9b9b-4b91fa5ea5cc" class="">For workflow definition we can use modified aws step function state machine schema</p><p id="e52ee299-0fed-4245-a20a-d1fc0608640b" class="">
</p><ul id="c48fea80-10c2-4851-abd5-5ec55ab520a3" class="bulleted-list"><li style="list-style-type:disc"><a href="https://states-language.net/spec.html#pass-state">https://states-language.net/spec.html</a></li></ul><ul id="b16c4b46-6650-466b-a332-8858e8213b55" class="bulleted-list"><li style="list-style-type:disc"><a href="https://aws-step-functions-data-science-sdk.readthedocs.io/en/stable/choicerules.html">https://aws-step-functions-data-science-sdk.readthedocs.io/en/stable/choicerules.html</a></li></ul><p id="c3109288-5166-4fd9-8b59-7169ea44c9d4" class="">This will allow us to not re-invent the wheel</p><h3 id="fe6db02d-3f99-4f27-833a-c64123288f72" class=""><strong>Definition using internal actions directly</strong></h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="54035cbe-134d-4073-867e-f09115b02ebb" class="code"><code class="language-JavaScript">{
  &quot;name&quot;: &quot;Notify Users of Overdue Books&quot;,
  &quot;description&quot;: &quot;A workflow to notify users of overdue books&quot;,
  &quot;startAt&quot;: &quot;GetAllUsers&quot;,
  &quot;states&quot;: {
    &quot;GetAllUsers&quot;: {
      &quot;type&quot;: &quot;Task&quot;,
      &quot;method&quot;: &quot;getAllUsers&quot;,
      &quot;next&quot;: &quot;ForEachUser&quot;
    },
    &quot;ForEachUser&quot;: {
      &quot;type&quot;: &quot;Map&quot;,
      &quot;itemsPath&quot;: &quot;$.users&quot;,
      &quot;iterator&quot;: {
        &quot;startAt&quot;: &quot;GetOverdueBooksForUser&quot;,
        &quot;states&quot;: {
          &quot;GetOverdueBooksForUser&quot;: {
            &quot;type&quot;: &quot;Task&quot;,
            &quot;method&quot;: &quot;getOverdueBooksForUser&quot;,
            &quot;next&quot;: &quot;CheckEmail&quot;
          },
          &quot;CheckEmail&quot;: {
            &quot;type&quot;: &quot;Choice&quot;,
            &quot;choices&quot;: [
              {
                &quot;variable&quot;: &quot;$.user.email&quot;,
                &quot;stringEquals&quot;: &quot;&quot;,
                &quot;next&quot;: &quot;SendTextNotification&quot;
              }
            ],
            &quot;default&quot;: &quot;SendEmailNotification&quot;
          },
          &quot;SendEmailNotification&quot;: {
            &quot;type&quot;: &quot;Task&quot;,
            &quot;method&quot;: &quot;sendEmailNotification&quot;,
            &quot;end&quot;: true
          },
          &quot;SendTextNotification&quot;: {
            &quot;type&quot;: &quot;Task&quot;,
            &quot;method&quot;: &quot;sendTextNotification&quot;,
            &quot;end&quot;: true
          }
        }
      }
    }
  }
}
</code></pre><h3 id="5109e2e2-efb3-4a3d-a822-3857876d3247" class=""><strong>Definition using api</strong></h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="aa235203-7555-4990-b219-5eba1e356f8a" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;A workflow to notify users of overdue books&quot;,
  &quot;StartAt&quot;: &quot;GetAllUsers&quot;,
  &quot;States&quot;: {
    &quot;GetAllUsers&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
      &quot;Parameters&quot;: {
        &quot;ApiEndpoint&quot;: &quot;https://library-management.com/getAllUsers&quot;,
        &quot;Method&quot;: &quot;GET&quot;,
        &quot;Headers&quot;: {
          &quot;Content-Type&quot;: &quot;application/json&quot;
        }
      },
      &quot;Next&quot;: &quot;ForEachUser&quot;
    },
    &quot;ForEachUser&quot;: {
      &quot;Type&quot;: &quot;Map&quot;,
      &quot;ItemsPath&quot;: &quot;$.users&quot;,
      &quot;Iterator&quot;: {
        &quot;StartAt&quot;: &quot;GetOverdueBooksForUser&quot;,
        &quot;States&quot;: {
          &quot;GetOverdueBooksForUser&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
            &quot;Parameters&quot;: {
              &quot;ApiEndpoint&quot;: &quot;https://library-management.com/getOverdueBooksForUser&quot;,
              &quot;Method&quot;: &quot;POST&quot;,
              &quot;Headers&quot;: {
                &quot;Content-Type&quot;: &quot;application/json&quot;
              },
              &quot;Body&quot;: {
                &quot;userId.$&quot;: &quot;$.id&quot;
              }
            },
            &quot;Next&quot;: &quot;CheckEmail&quot;
          },
          &quot;CheckEmail&quot;: {
            &quot;Type&quot;: &quot;Choice&quot;,
            &quot;Choices&quot;: [
              {
                &quot;Variable&quot;: &quot;$.user.email&quot;,
                &quot;StringEquals&quot;: &quot;&quot;,
                &quot;Next&quot;: &quot;SendTextNotification&quot;
              }
            ],
            &quot;Default&quot;: &quot;SendEmailNotification&quot;
          },
          &quot;SendEmailNotification&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
            &quot;Parameters&quot;: {
              &quot;ApiEndpoint&quot;: &quot;https://library-management.com/sendEmailNotification&quot;,
              &quot;Method&quot;: &quot;POST&quot;,
              &quot;Headers&quot;: {
                &quot;Content-Type&quot;: &quot;application/json&quot;
              },
              &quot;Body&quot;: {
                &quot;email.$&quot;: &quot;$.user.email&quot;,
                &quot;overdueBooks.$&quot;: &quot;$.overdueBooks&quot;
              }
            },
            &quot;End&quot;: true
          },
          &quot;SendTextNotification&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
            &quot;Parameters&quot;: {
              &quot;ApiEndpoint&quot;: &quot;https://library-management.com/sendTextNotification&quot;,
              &quot;Method&quot;: &quot;POST&quot;,
              &quot;Headers&quot;: {
                &quot;Content-Type&quot;: &quot;application/json&quot;
              },
              &quot;Body&quot;: {
                &quot;phoneNumber.$&quot;: &quot;$.user.phone_number&quot;,
                &quot;overdueBooks.$&quot;: &quot;$.overdueBooks&quot;
              }
            },
            &quot;End&quot;: true
          }
        }
      },
      &quot;End&quot;: true
    }
  }
}
</code></pre><h3 id="6e28e131-7723-445b-abb0-05786ac39c3f" class=""><strong>Definition with error and custom condition</strong></h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="f74397c9-030f-4b91-bb6c-20146216de35" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;A workflow to notify users of overdue books&quot;,
  &quot;StartAt&quot;: &quot;GetAllUsers&quot;,
  &quot;States&quot;: {
    &quot;GetAllUsers&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;Resource&quot;: &quot;arn:aws:states:::aws-sdk:dynamodb:scan&quot;,
      &quot;Parameters&quot;: {
        &quot;TableName&quot;: &quot;UsersTable&quot;
      },
      &quot;TimeoutSeconds&quot;: 60,
      &quot;Retry&quot;: [
        {
          &quot;ErrorEquals&quot;: [&quot;States.Timeout&quot;],
          &quot;IntervalSeconds&quot;: 2,
          &quot;MaxAttempts&quot;: 3,
          &quot;BackoffRate&quot;: 2.0
        }
      ],
      &quot;Catch&quot;: [
        {
          &quot;ErrorEquals&quot;: [&quot;States.ALL&quot;],
          &quot;Next&quot;: &quot;HandleGetAllUsersError&quot;
        }
      ],
      &quot;Next&quot;: &quot;ForEachUser&quot;
    },
    &quot;HandleGetAllUsersError&quot;: {
      &quot;Type&quot;: &quot;Fail&quot;,
      &quot;Error&quot;: &quot;GetAllUsersFailed&quot;,
      &quot;Cause&quot;: &quot;Failed to get all users from the database.&quot;
    },
    &quot;ForEachUser&quot;: {
      &quot;Type&quot;: &quot;Map&quot;,
      &quot;ItemsPath&quot;: &quot;$.Items&quot;,
      &quot;Iterator&quot;: {
        &quot;StartAt&quot;: &quot;GetOverdueBooksForUser&quot;,
        &quot;States&quot;: {
          &quot;GetOverdueBooksForUser&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::aws-sdk:dynamodb:query&quot;,
            &quot;Parameters&quot;: {
              &quot;TableName&quot;: &quot;BooksTable&quot;,
              &quot;KeyConditionExpression&quot;: &quot;UserId = :userId&quot;,
              &quot;ExpressionAttributeValues&quot;: {
                &quot;:userId&quot;: {
                  &quot;S.$&quot;: &quot;$.id&quot;
                }
              }
            },
            &quot;TimeoutSeconds&quot;: 30,
            &quot;Retry&quot;: [
              {
                &quot;ErrorEquals&quot;: [&quot;States.Timeout&quot;],
                &quot;IntervalSeconds&quot;: 2,
                &quot;MaxAttempts&quot;: 3,
                &quot;BackoffRate&quot;: 2.0
              }
            ],
            &quot;Catch&quot;: [
              {
                &quot;ErrorEquals&quot;: [&quot;States.ALL&quot;],
                &quot;Next&quot;: &quot;HandleGetOverdueBooksError&quot;
              }
            ],
            &quot;Next&quot;: &quot;CheckOverdueDuration&quot;
          },
          &quot;HandleGetOverdueBooksError&quot;: {
            &quot;Type&quot;: &quot;Fail&quot;,
            &quot;Error&quot;: &quot;GetOverdueBooksFailed&quot;,
            &quot;Cause&quot;: &quot;Failed to get overdue books for the user.&quot;
          },
          &quot;CheckOverdueDuration&quot;: {
            &quot;Type&quot;: &quot;Choice&quot;,
            &quot;Choices&quot;: [
              {
                &quot;Variable&quot;: &quot;$.dueDate&quot;,
                &quot;TimestampGreaterThan&quot;: 34543534545,
                &quot;Next&quot;: &quot;CheckEmail&quot;
              }
            ],
            &quot;Default&quot;: &quot;SkipNotification&quot;
          },
          &quot;CheckEmail&quot;: {
            &quot;Type&quot;: &quot;Choice&quot;,
            &quot;Choices&quot;: [
              {
                &quot;Variable&quot;: &quot;$.email&quot;,
                &quot;IsPresent&quot;: false,
                &quot;Next&quot;: &quot;SendTextNotification&quot;
              }
            ],
            &quot;Default&quot;: &quot;SendEmailNotification&quot;
          },
          &quot;SendEmailNotification&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::sns:publish&quot;,
            &quot;Parameters&quot;: {
              &quot;Message.$&quot;: &quot;Hello, you have overdue books: $.overdueBooks&quot;,
              &quot;TopicArn&quot;: &quot;arn:aws:sns:us-east-1:123456789012:NotifyUser&quot;
            },
            &quot;End&quot;: true
          },
          &quot;SendTextNotification&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::sns:publish&quot;,
            &quot;Parameters&quot;: {
              &quot;Message.$&quot;: &quot;Hello, you have overdue books: $.overdueBooks&quot;,
              &quot;PhoneNumber.$&quot;: &quot;$.phoneNumber&quot;
            },
            &quot;End&quot;: true
          },
          &quot;SkipNotification&quot;: {
            &quot;Type&quot;: &quot;Pass&quot;,
            &quot;End&quot;: true
          }
        }
      },
      &quot;End&quot;: true
    }
  }
}
</code></pre><h3 id="a6511959-8382-4408-9e4b-61eed71ed3fa" class=""><strong>Definition for connecting Multiple workflows</strong></h3><ul id="81a36055-5f87-4bc9-94f7-f88b81ebb9b8" class="bulleted-list"><li style="list-style-type:disc">There will be time when user wants to create atomic workflows for future reuse.</li></ul><ul id="ea7ee69c-57b4-4b91-8951-bd9086b97558" class="bulleted-list"><li style="list-style-type:disc">Here we are connecting multiple workflow and creating combined workflow definition</li></ul><p id="da59c8c2-75b8-4707-a4e6-a152ba9f6997" class="">Sub-Workflow 1: GetAllUsers</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="df4d451d-6338-49b2-a1cf-3d406822e693" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;Sub-Workflow to get all users&quot;,
  &quot;StartAt&quot;: &quot;GetAllUsersTask&quot;,
  &quot;States&quot;: {
    &quot;GetAllUsersTask&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;method&quot;: &quot;getAllUsers&quot;,
      &quot;End&quot;: true
    }
  }
}
</code></pre><p id="64b19afa-6d38-4c85-9f3d-69993b20fd5a" class="">Sub-Workflow 2: GetOverdueBooksForUser</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="97958e3c-73d7-46a1-9f3c-afc0c3f6f1a4" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;Sub-Workflow to get overdue books for a user&quot;,
  &quot;StartAt&quot;: &quot;GetOverdueBooksForUserTask&quot;,
  &quot;States&quot;: {
    &quot;GetOverdueBooksForUserTask&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;method&quot;: &quot;getOverdueBooksForUser&quot;,
      &quot;End&quot;: true
    }
  }
}
</code></pre><p id="2e235dbe-5276-48f0-b1ef-b324184edd15" class="">Sub-Workflow 3: SendNotification</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="da611a47-4149-4f0b-b697-a242aed0114e" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;Sub-Workflow to send a notification&quot;,
  &quot;StartAt&quot;: &quot;CheckOverdueDuration&quot;,
  &quot;States&quot;: {
    &quot;CheckOverdueDuration&quot;: {
      &quot;Type&quot;: &quot;Choice&quot;,
      &quot;Choices&quot;: [
        {
          &quot;Variable&quot;: &quot;$.overdueDuration&quot;,
          &quot;NumericGreaterThan&quot;: 24,
          &quot;Next&quot;: &quot;CheckEmail&quot;
        }
      ],
      &quot;Default&quot;: &quot;SkipNotification&quot;
    },
    &quot;CheckEmail&quot;: {
      &quot;Type&quot;: &quot;Choice&quot;,
      &quot;Choices&quot;: [
        {
          &quot;Variable&quot;: &quot;$.email&quot;,
          &quot;IsPresent&quot;: false,
          &quot;Next&quot;: &quot;SendTextNotification&quot;
        }
      ],
      &quot;Default&quot;: &quot;SendEmailNotification&quot;
    },
    &quot;SendEmailNotification&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;Resource&quot;: &quot;arn:aws:states:::sns:publish&quot;,
      &quot;Parameters&quot;: {
        &quot;Message.$&quot;: &quot;Hello, you have overdue books: $.overdueBooks&quot;,
        &quot;TopicArn&quot;: &quot;arn:aws:sns:us-east-1:123456789012:NotifyUser&quot;
      },
      &quot;End&quot;: true
    },
    &quot;SendTextNotification&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;Resource&quot;: &quot;arn:aws:states:::sns:publish&quot;,
      &quot;Parameters&quot;: {
        &quot;Message.$&quot;: &quot;Hello, you have overdue books: $.overdueBooks&quot;,
        &quot;PhoneNumber.$&quot;: &quot;$.phoneNumber&quot;
      },
      &quot;End&quot;: true
    },
    &quot;SkipNotification&quot;: {
      &quot;Type&quot;: &quot;Pass&quot;,
      &quot;End&quot;: true
    }
  }
}
</code></pre><p id="4840064a-b520-4a8b-975d-df79266f555c" class="">Main Workflow</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="5f0d0de5-2627-4c60-808b-e282099ec721" class="code"><code class="language-JavaScript">{
  &quot;Comment&quot;: &quot;Main Workflow to notify users of overdue books&quot;,
  &quot;StartAt&quot;: &quot;ExecuteGetAllUsersWorkflow&quot;,
  &quot;States&quot;: {
    &quot;ExecuteGetAllUsersWorkflow&quot;: {
      &quot;Type&quot;: &quot;Task&quot;,
      &quot;Resource&quot;: &quot;arn:aws:states:::states:startExecution.sync&quot;,
      &quot;Parameters&quot;: {
        &quot;StateMachineArn&quot;: &quot;GetAllUsersWorkflowID&quot;,
        &quot;Input&quot;: {
          &quot;ExecutionId.$&quot;: &quot;$$.Execution.Id&quot;
        }
      },
      &quot;Next&quot;: &quot;ForEachUser&quot;
    },
    &quot;ForEachUser&quot;: {
      &quot;Type&quot;: &quot;Map&quot;,
      &quot;ItemsPath&quot;: &quot;$.Users&quot;,
      &quot;Iterator&quot;: {
        &quot;StartAt&quot;: &quot;ExecuteGetOverdueBooksForUserWorkflow&quot;,
        &quot;States&quot;: {
          &quot;ExecuteGetOverdueBooksForUserWorkflow&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::states:startExecution.sync&quot;,
            &quot;Parameters&quot;: {
              &quot;StateMachineArn&quot;: &quot;GetOverdueBooksForUserWorkflowId&quot;,
              &quot;Input&quot;: {
                &quot;UserId.$&quot;: &quot;$.id&quot;
              }
            },
            &quot;Next&quot;: &quot;ExecuteSendNotificationWorkflow&quot;
          },
          &quot;ExecuteSendNotificationWorkflow&quot;: {
            &quot;Type&quot;: &quot;Task&quot;,
            &quot;Resource&quot;: &quot;arn:aws:states:::states:startExecution.sync&quot;,
            &quot;Parameters&quot;: {
              &quot;StateMachineArn&quot;: &quot;SendNotificationWorkflowId&quot;,
              &quot;Input&quot;: {
                &quot;User.$&quot;: &quot;$&quot;
              }
            },
            &quot;End&quot;: true
          }
        }
      },
      &quot;End&quot;: true
    }
  }
}
</code></pre><p id="9ffb4082-18c9-4996-92ce-4df4f07f7549" class="">
</p><p id="b2cb257d-bf6a-43a2-9b01-ff15cbaa4be2" class="">
</p><p id="4f7f614a-50a0-4686-87a6-e3a3da8c1b46" class="">
</p><p id="a74162f9-a765-49a1-832a-0362a150490f" class="">
</p><p id="6143a34e-78e5-4e1b-8e62-a58e90ad02c5" class=""><strong>List of various types</strong></p><ul id="034fa2e4-301c-486b-864f-a9d56a120955" class="bulleted-list"><li style="list-style-type:disc">Task</li></ul><ul id="c6711810-94b0-40a5-8a2a-4a046a97a2fc" class="bulleted-list"><li style="list-style-type:disc">Parallel</li></ul><ul id="36081e17-c4e4-4d91-99c1-82ad92367be2" class="bulleted-list"><li style="list-style-type:disc">Map</li></ul><ul id="b2d7f405-de51-419f-9c14-044b847170d8" class="bulleted-list"><li style="list-style-type:disc">Pass</li></ul><ul id="309e54aa-5b17-4043-9308-7e3a0fa1082a" class="bulleted-list"><li style="list-style-type:disc">Wait</li></ul><ul id="37854773-bf79-43ac-9b86-8fd0179ec36e" class="bulleted-list"><li style="list-style-type:disc">Choice</li></ul><ul id="c0ad943a-4a4f-4ac0-9bea-8a7b1e5147f6" class="bulleted-list"><li style="list-style-type:disc">Succeed</li></ul><ul id="1f7672e6-15b1-4b99-8b77-0d539b6b41d3" class="bulleted-list"><li style="list-style-type:disc">Fail</li></ul><ul id="410f7de9-bdaf-4b50-9e4a-d3b00c0260f7" class="bulleted-list"><li style="list-style-type:disc">External - In case workflow wants to call external API directly e.g some aws lambda</li></ul><p id="dda3938c-a55e-457d-a2ca-c8c36ae12208" class=""><strong>Implementation</strong></p><ul id="74c6e9df-16db-4779-9c52-0e1644e73d3f" class="bulleted-list"><li style="list-style-type:disc">validate workflow definition</li></ul><ul id="7f2743a3-78f4-4417-9284-3de9b05cd21f" class="bulleted-list"><li style="list-style-type:disc">We have to create framework to execute each steps based on above workflow definition </li></ul><ul id="e9ab97cf-2866-43b7-86cc-35481635521e" class="bulleted-list"><li style="list-style-type:disc">For each type we can have switch clause and execute either internal methods or apis </li></ul><ul id="de83e29a-32bf-4042-8d65-b50818ea2628" class="bulleted-list"><li style="list-style-type:disc">Each action can be temporal workflow internally </li></ul><h2 id="554e5674-93ff-45a1-b3fe-27c4359b5240" class="">APIs</h2><h2 id="ea4005a8-3f31-4d54-be25-03c4307ab644" class="">Workflow Create (Permission: WORKFLOW_CREATE)</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="891bea50-0485-4c35-9ead-ac281dc2a85b" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/workflows

Request

{
  &quot;name&quot;: &quot;Notify Users of Overdue Books&quot;,
  &quot;description&quot;: &quot;A workflow to notify users of overdue books&quot;,
  &quot;definition&quot;: {
    &quot;StartAt&quot;: &quot;GetAllUsers&quot;,
    &quot;States&quot;: {
      &quot;GetAllUsers&quot;: {
        &quot;Type&quot;: &quot;Task&quot;,
        &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
        &quot;Parameters&quot;: {
          &quot;ApiEndpoint&quot;: &quot;https://your-api.example.com/getAllUsers&quot;,
          &quot;Method&quot;: &quot;GET&quot;,
          &quot;Headers&quot;: {
            &quot;Content-Type&quot;: &quot;application/json&quot;
          }
        },
        &quot;Next&quot;: &quot;ForEachUser&quot;
      },
      &quot;ForEachUser&quot;: {
        &quot;Type&quot;: &quot;Map&quot;,
        &quot;ItemsPath&quot;: &quot;$.users&quot;,
        &quot;Iterator&quot;: {
          &quot;StartAt&quot;: &quot;GetOverdueBooksForUser&quot;,
          &quot;States&quot;: {
            &quot;GetOverdueBooksForUser&quot;: {
              &quot;Type&quot;: &quot;Task&quot;,
              &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
              &quot;Parameters&quot;: {
                &quot;ApiEndpoint&quot;: &quot;https://your-api.example.com/getOverdueBooksForUser&quot;,
                &quot;Method&quot;: &quot;POST&quot;,
                &quot;Headers&quot;: {
                  &quot;Content-Type&quot;: &quot;application/json&quot;
                },
                &quot;Body&quot;: {
                  &quot;userId.$&quot;: &quot;$.id&quot;
                }
              },
              &quot;Next&quot;: &quot;CheckEmail&quot;
            },
            &quot;CheckEmail&quot;: {
              &quot;Type&quot;: &quot;Choice&quot;,
              &quot;Choices&quot;: [
                {
                  &quot;Variable&quot;: &quot;$.user.email&quot;,
                  &quot;StringEquals&quot;: &quot;&quot;,
                  &quot;Next&quot;: &quot;SendTextNotification&quot;
                }
              ],
              &quot;Default&quot;: &quot;SendEmailNotification&quot;
            },
            &quot;SendEmailNotification&quot;: {
              &quot;Type&quot;: &quot;Task&quot;,
              &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
              &quot;Parameters&quot;: {
                &quot;ApiEndpoint&quot;: &quot;https://your-api.example.com/sendEmailNotification&quot;,
                &quot;Method&quot;: &quot;POST&quot;,
                &quot;Headers&quot;: {
                  &quot;Content-Type&quot;: &quot;application/json&quot;
                },
                &quot;Body&quot;: {
                  &quot;email.$&quot;: &quot;$.user.email&quot;,
                  &quot;overdueBooks.$&quot;: &quot;$.overdueBooks&quot;
                }
              },
              &quot;End&quot;: true
            },
            &quot;SendTextNotification&quot;: {
              &quot;Type&quot;: &quot;Task&quot;,
              &quot;Resource&quot;: &quot;arn:aws:states:::http:invoke&quot;,
              &quot;Parameters&quot;: {
                &quot;ApiEndpoint&quot;: &quot;https://your-api.example.com/sendTextNotification&quot;,
                &quot;Method&quot;: &quot;POST&quot;,
                &quot;Headers&quot;: {
                  &quot;Content-Type&quot;: &quot;application/json&quot;
                },
                &quot;Body&quot;: {
                  &quot;phoneNumber.$&quot;: &quot;$.user.phone_number&quot;,
                  &quot;overdueBooks.$&quot;: &quot;$.overdueBooks&quot;
                }
              },
              &quot;End&quot;: true
            }
          }
        }
      }
    }
  }
}


Response
Response will return same json as above with just workflow id to it</code></pre><h2 id="5c68af60-cc3f-4644-95c7-bd3e4c9032ef" class="">Workflow execute</h2><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="cadc8ec7-2aa6-4482-8144-2f922e26041e" class="code"><code class="language-JavaScript">POST /api/tenant/{tenant_id}/workflows/{workflow_id}/execute

Response
Task
{
	&quot;id&quot;: &quot;UUID&quot;
	&quot;status&quot;: &quot;IN_PROGRESS&quot;
	&quot;created_at&quot;: &quot;some time&quot;,
	&quot;updated_at&quot;: &quot;some time&quot;,
	&quot;message&quot;: &quot;Sending notification&quot;
	&quot;steps&quot;: &quot;3/8&quot;
}</code></pre><h2 id="79b20c71-82d5-4ec1-bfed-94923cc84bde" class="">Workflow trigger</h2><ul id="2204dd44-d193-4fec-a254-cb43adfbd835" class="bulleted-list"><li style="list-style-type:disc">Workflow service will subscribe to events from kafka</li></ul><ul id="8b13c47e-bf79-49cf-821c-749eb1674f1f" class="bulleted-list"><li style="list-style-type:disc">Consumer will consume these events and check for if has any workflow asssociated</li></ul><ul id="f8001a41-4ada-48c8-912c-a3a0b3b963e3" class="bulleted-list"><li style="list-style-type:disc">e.g of message <code>tenant/{tenant_id}/lending/BOOK_AVAILALBE</code></li></ul><h2 id="290eb2d3-b4f3-4818-979c-c8a374598c57" class="">Other APIs</h2><p id="5cb57128-2168-454e-855b-b54ca9b888b6" class="">These are simple CRUD APIs</p><ol type="1" id="17f15c54-cc42-4662-bd67-0dfc0fd1f13d" class="numbered-list" start="1"><li>CRUD for permission for workflow</li></ol><ol type="1" id="ca98ad3f-becc-4e99-a04d-0f02e6291ad1" class="numbered-list" start="2"><li>Assign permission to user for workflow</li></ol><ol type="1" id="600abfad-67a4-4033-b468-bee200a5f687" class="numbered-list" start="3"><li>CRUD get Lest of actions</li></ol><ol type="1" id="47c4ce2b-e739-44a2-b5e9-b3915a7a8367" class="numbered-list" start="4"><li>READ APIs for workflow and action history</li></ol><h1 id="ab23cddc-52c3-46c5-9a85-57c7f6afb841" class="">Analytics Service</h1><ul id="7ca97d63-8867-4124-a400-0f8bdb0c22a5" class="bulleted-list"><li style="list-style-type:disc">Top 100 most borrowed books</li></ul><ul id="12b1450d-5599-41a0-afb0-a9448ae4f1cd" class="bulleted-list"><li style="list-style-type:disc">top users by most borrowed books</li></ul><ul id="3de1c312-774e-49cf-9ac8-9730324f2fd1" class="bulleted-list"><li style="list-style-type:disc">Users ploted on map as per location (to view which region has more borrowers)</li></ul><ul id="1e7eb9a0-bb92-4f18-8fc8-c6877cdf9eed" class="bulleted-list"><li style="list-style-type:disc">etc.</li></ul><h1 id="269df9fb-c5cc-4752-bf1c-281fd13dca9c" class="">Misc</h1><h3 id="4d91e8d3-40de-424f-9a35-0f5fd8119c47" class="">Upload (Request Pre-Sgined s3 URL)</h3><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="c932907c-bc43-4c91-a7ba-0e5e6cb8fa2a" class="code"><code class="language-JSON" style="white-space:pre-wrap;word-break:break-all">POST /api/tenant/{tenant_id}upload/upload_url

Response code: 200 OK
{
   &quot;sha256&quot;: &quot;da96c12a41e5334ee287b13428692b701569b823944467db712f371114da7bde&quot;
   &quot;content_length&quot;: 5151511,
   &quot;file_name&quot;: &quot;photo.png&quot;
}
Response Body
{
  &quot;url&quot;: &quot;https://demo.s3.eu-west-2.amazonaws.com/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=AKIAJJWZ7B6WCRGMKFGQ%2F20180210%2Feu-west-2%2Fs3%2Faws4_request&amp;X-Amz-Date=20180210T171315Z&amp;X-Amz-Expires=1800&amp;X-Amz-Signature=12b74b0788aa036bc7c3d03b3f20c61f1f91cc9ad8873e3314255dc479a25351&amp;X-Amz-SignedHeaders=host&quot;,
}

== Error ==
If file is already uploaded then this will throw an error saying file already found.
If name is different for file but sha is same, we can update name in file metadata.</code></pre><ol type="1" id="f7e3968b-633a-4b5e-a61b-50be4a44b65c" class="numbered-list" start="1"><li>This API will generate Pre-Signed corresponding to SHA256 of file contents and size of file in bytes</li></ol><ol type="1" id="f0a68203-e785-474f-bb3d-6a47f3c60901" class="numbered-list" start="2"><li>Request Body<ol type="a" id="7b4076f6-a632-4ccc-8041-c90b25093ecf" class="numbered-list" start="1"><li>sha256: SHA-256 of file contents</li></ol><ol type="a" id="7993a202-f831-4a1f-8382-ed260add345c" class="numbered-list" start="2"><li>content_length: File size in bytes</li></ol><ol type="a" id="dd361312-5de5-4610-8e21-e265e2551871" class="numbered-list" start="3"><li>ObjectKey: <code>sha256</code>  — This is random UUID will make sure we are not limited by number of write requests. S3 only allows 3500 writes per sec per partitioned prefix. Since prefix is randomized we will not have this limit.</li></ol></li></ol><ol type="1" id="92ec4682-567f-4d86-b30c-d6a1892f6a58" class="numbered-list" start="3"><li>Using above properties File Service will generate pre-signed url (<ol type="a" id="487a3aed-e174-410e-8ab9-bcca9ba4581a" class="numbered-list" start="1"><li><code>x-amz-checksum-algorithm: SHA256</code> </li></ol><ol type="a" id="69d6c91d-5237-4f23-a215-4488affb6991" class="numbered-list" start="2"><li><code>x-amz-checksum-sha256:da96c12a41e5334ee287b13428692b701569b823944467db712f371114da7bde </code> , </li></ol><ol type="a" id="0f0375ed-44a3-40c8-b126-4b7c2701de87" class="numbered-list" start="3"><li><code>contentLength:5151511</code> </li></ol><ol type="a" id="e5fcbeaa-dae9-45ab-821a-cda611b735fc" class="numbered-list" start="4"><li><code>x-amz-meta-user_id:&lt;userid&gt;:</code> User metadata (will be used to map with key)</li></ol></li></ol><ol type="1" id="8b962d01-6aa0-4137-bad8-c29ead271caa" class="numbered-list" start="4"><li>Use multi part s3 upload</li></ol><ol type="1" id="94db63a1-5d1a-4875-8480-eb6651a5907f" class="numbered-list" start="5"><li>This will make sure generated URL will not be used for any other file</li></ol><ol type="1" id="e0f72167-19a4-47d6-aa1c-2cb3bb703ea3" class="numbered-list" start="6"><li>On upload complete s3 will send notification and User service or book service will subscribe to this. Once notification is received User service or book service will fetch object metadata and upsert it in DB </li></ol><h1 id="37173b69-2860-4f89-8ea8-c752c856ff90" class="">Multi Tenant (isolated)</h1><ul id="9ac0b15f-12bf-4483-bd4f-fcbeaff0c155" class="bulleted-list"><li style="list-style-type:disc">If tenant does not want to share data with other tenants then we can deploy isolated library management service.</li></ul><ul id="581eeb38-e67a-4f21-93fa-a282ff0132d7" class="bulleted-list"><li style="list-style-type:disc">Each isolated service will be deployed using operator and terraform</li></ul><ul id="aaa74509-1316-4f07-a91b-58a1ed36aeb4" class="bulleted-list"><li style="list-style-type:disc">All services are deployed on kubernetes (EKS)</li></ul><ul id="95de25e1-9b59-4b03-92ab-3fcc7f3dc492" class="bulleted-list"><li style="list-style-type:disc"></li></ul><h1 id="c521d964-caad-40d0-b4e0-19b7c93ebcd1" class="">Notes</h1><ul id="36ed6276-44e9-493b-bc40-d836c5ee40d0" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Globally defined genre</span><div class="indented"></div></li></ul><ul id="9fd92aa8-b335-43e5-9222-5de0d84dfec8" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Soft delete, all queries should make sure deleted_at is null</span><div class="indented"></div></li></ul><ul id="5d2f18c8-0f39-4854-9284-e084dcac03cf" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">member should have their own UI to view which books they have rented out and keep history</span><div class="indented"></div></li></ul><p id="f5dd77d9-f6c1-4ff8-943a-e68a2103a9b7" class="">
</p><h1 id="c92a2ba7-340f-4501-a934-92d6cb4eddb8" class="">Extension</h1><ul id="030afa91-7aad-42e8-a257-2b42ed00ce77" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Library Batch for member for access</span><div class="indented"></div></li></ul><ul id="2e8caffd-dbf6-4496-8b4f-edf3867df362" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Monthly subscriptions</span><div class="indented"></div></li></ul><ul id="4a3aa13c-f60f-4e7e-90ad-6a6f66a72bfd" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Global library - This will be connecting all library management</span><div class="indented"><ul id="13d644c1-79c6-4ab9-b5df-eaeeea121d02" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Lending across libraries</span><div class="indented"></div></li></ul><ul id="c07a6db9-c5e5-4793-8723-1d04a5e19146" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked">Purchasing across libraries</span><div class="indented"></div></li></ul></div></li></ul></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>